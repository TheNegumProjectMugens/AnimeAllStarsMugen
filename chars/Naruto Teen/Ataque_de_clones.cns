; aparece
[Statedef 1030]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,-4
scale = .2,.4
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 1031

; clon golpea hacia abajo con manos
[Statedef 1031]
type=A
movetype=A
physics=n
poweradd= -50
ctrl=0
sprpriority=2

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = .5


[State 600,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value=600

[State 600,1]
type=PlaySnd
trigger1=Time=1
value=0,0

[State 600,HitDef]
type=HitDef
trigger1=!Time
attr=A,NA
damage=10
hitflag = MADF+
guardflag=
priority=4
pausetime=5,10
sparkno=s9998
sparkxy=-5,-10
hitsound=s5,0
guardsound=s6,0
animtype=Med
ground.type=High
ground.slidetime=17
ground.hittime=17
ground.velocity= -2,8
air.velocity= -2,8
fall = 1
guard.dist = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 30
value = 1033

;desaparece
[Statedef 1033]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = prevstateno = 3094
flag = noshadow

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,-2
scale = .2,.4
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time = 6











;-------------------------------------------------------------------------------


; aparece
[Statedef 1040]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
postype = p1
scale =.25,.5
pos = 0,-10
postype = p1
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 1041

; clon dash attack
[Statedef 1041]
type=S
movetype=A
physics=N
poweradd= -100
ctrl=0
velset=3,0
sprpriority=2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck


[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value= 641

[State 0, VelSet]
type = VelSet
trigger1 = !movecontact
x = 5
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = .5
y = 0

[State 240,1]
type=PlaySnd
trigger1=Time=2
value=0,1

[State 240,HitDef]
type=HitDef
trigger1=AnimElem=1
attr=S,NA
animtype=Medium
damage= 35
hitflag = MADF
guardflag=MA
pausetime=12,10
sparkno=s9998
sparkxy=-10,-20
hitsound=s5,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity=-2.0
air.velocity=-2.5,0



[State 240,4]
type=ChangeState
trigger1=!AnimTime
value = 1033


;-------------------------------------------------------------------------------


; aparece
[Statedef 1060]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, PosSet]
type = null;PosSet
trigger1 = 1
y = -70


[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 196
pos = 0,5
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 1061

;clon dispara kunai en aire
[StateDef 1061]
type = A
movetype = A
physics = N
anim = 3032
ctrl = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 3
value = -100

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 12,13

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
pos = 21,-19
postype = p1
stateno = 1004
helpertype = normal
name = "kunai"
ownpal = 1

[State 0, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 1033


;-------------------------------------------------------------------------------

;-------------------------------------------------------------------------------


; aparece
[Statedef 1070]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -60

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 1071

; clon air attack
[Statedef 1071]
type=A
movetype=A
physics=N
poweradd= -30
ctrl=0
sprpriority=2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, Gravity]
type = veladd
trigger1 = pos y < 0
y = .3

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = pos y >= 0
y = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 16
range = 0,3


[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
trigger1= var(16) = 0
value= 270

[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
trigger1= var(16) = 1
value= 600

[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
trigger1= var(16) = 2
value= 630

[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
trigger1= var(16) = 3
value= 631



[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 240,1]
type=PlaySnd
trigger1=Time=2
value=0,1

[State 240,HitDef]
type=HitDef
trigger1=AnimElem=1
attr=S,NA
animtype=Medium
damage= 35
hitflag = MADF
guardflag=MA
pausetime=12,10
sparkno=s9998
sparkxy=-10,-20
hitsound=s5,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity=-2.0
air.velocity=-2.5,0

[State 240,4]
type=ChangeState
trigger1= Time >= 25
value = 1033


;-------------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Rasenshuriken (Start)
[StateDef 1600]
type = S
movetype = I
physics = S
anim = 3050
velset = 0,0
sprpriority = 0
ctrl = 0

[State 883, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,0
volume = 100

[State 883, PlaySnd]
type = PlaySnd
trigger1 = !time
anim=-1
value = S1,15
volume = 100

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 190
anim = -1
pos = 0,0
movetime = 190
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Super-Charge"
ID = 6801
stateno = 6801
pos = 5,-35
size.yscale = 1
size.xscale = 1
postype = p1   ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 229
ID = 229
pos = -5,0
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.5,0.5
ontop = 0
supermovetime = -1
pausemovetime = -1

[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 228
ID = 229
pos = 0,2
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.4,0.4
ontop = 0
supermovetime = -1
pausemovetime = -1

[State 842, Explod]
type = Explod
trigger1 = time = 10
anim = 235
ID = 229
pos = 10,-25
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
supermovetime = 9999
pausemovetime = 9999
scale = 0.13,0.13
sprpriority = 5
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 15,0
postype = P1
stateno = 2099
helpertype = normal
name = "clon izquierdo"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 0,0
postype = P1
stateno = 2099
helpertype = normal
name = "clon izquierdo"
ownpal = 1
facing = -1
supermovetime = 1000
pausemovetime = 1000

[State 1600, Explod]
type = Explod
trigger1 = time = 10 && !NumExplod(5235263)
anim = 5235263
ID = 1004
pos = 10,-26
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 121
pausemovetime = 99999
supermovetime = 99999
scale = .1,.1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 1600, Explod]
type = Explod
trigger1 = time = 121 && !NumExplod(523457)
anim = 523457
ID = 1004
pos = 10,-26
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 79
pausemovetime = 99999
supermovetime = 99999
scale = .5,.5
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 240,1]
type=PlaySnd
trigger1= time = 100
value= 117,0
persistent =0
channel = 4

[State 1600, ChangeState]
type = ChangeState
trigger1 = time > 200
value = 1601
ctrl = 0

;---------------------------------------------------------------------------
;Rasenshuriken (Create)
[StateDef 1601]
type = S
movetype = I
physics = S
anim = 3056
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1600, PlaySnd]
type = PlaySnd
trigger1 = time=0 || time=1
value = 500,0

[State 1601, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 1000,2

[State 1601, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1600,1

[State 1601, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "RASENSHURIKEN"
ID = 1602
stateno = 1602
pos = -14,-75
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 1
size.yscale = 1;.25

[State 875, RemoveExplod]
type = RemoveExplod
trigger1 = time = 6
id = 229


[State 1601, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 1611
ctrl = 0

;---------------------------------------------------------------------------
;Rasenshuriken Helper
[StateDef 1602]
type = S
movetype = A
physics = N
anim = 523457
velset = 0,0
sprpriority = 5

[State 1602, VarSet]
type = VarSet
trigger1 = !time
fvar(1) = .3

[State 1602, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 1600,3

[State 1602, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[State 1602, BindToParent]
type = BindToParent
trigger1 = root,stateno=1601 && root,AnimElem = 2
time = 110
pos = -5,-60

[State 1602, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno=1611
value = 1603
persistent = 0

[State 1602, BindToParent]
type = BindToParent
trigger1 = root,stateno=1611 && Anim=1603
time = -1
pos = -5,-25

[State 1602, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno=1612 && Anim=1603
value = 523457
persistent = 0

[State 1602, BindToParent]
type = BindToParent
trigger1 = anim=523457 && root,stateno=1612 && root,animelem = 1
pos = -15, -25
time = 4

[State 1602, BindToParent]
type = BindToParent
trigger1 = anim=523457 && root,stateno=1612 && root,AnimElemTime(2)>=0
pos = 40, -25
time = 2

[State 1602, SprPriority]
type = SprPriority
trigger1 = anim=523457 && root,stateno=1612 && root,AnimElemTime(2)>=0
value = -1

[State 1602, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 1602, AngleDraw]
type = AngleDraw
trigger1 = anim=523457 && root,stateno=1612 && root,AnimElemTime(2)>=0
value = 90
ignorehitpause = 1

[State 1602, HitDef]
type = HitDef
trigger1 = root,stateno=1612 && anim=523457&& time%5=0
attr = A,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFD        ;HLAFD+-
guardflag = MA         ;HLA
animtype = hard          ;light,medium,hard,back,up,diagup
air.animtype = hard
damage = 6,2
pausetime = 0 ,5
sparkno = -1
guard.sparkno = S16000
sparkxy = 0,0
hitsound = -1;S1100,0
guardsound = -1;S1100,1
ground.type = High      ;Low,Trip,None
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
ground.velocity = -1,-5
air.velocity = -1,-5
ground.cornerpush.veloff = 0
sprpriority = 1
p1getp2facing = 0
fall = 1
air.fall = 1
hitonce = 0
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
getpower = 0,0
envshake.time = 10
envshake.freq = 60
envshake.ampl = -5
envshake.phase = 90

[State 1602, HitDef]
type = HitDef
trigger1 = anim=1604 && time%5=0 && AnimElemTime(65)<5
attr = A,HA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFD        ;HLAFD+-
guardflag = MA         ;HLA
animtype = hard          ;light,medium,hard,back,up,diagup
air.animtype = hard
damage = 6,2
pausetime = 0 ,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1;S1100,0
guardsound = -1;S1100,1
ground.type = High      ;Low,Trip,None
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
ground.velocity = 0,-10
air.velocity = 0,-10
ground.cornerpush.veloff = 0
sprpriority = 5
p1getp2facing = 0
fall = 1
air.fall = 1
hitonce = 0
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
getpower = 0,0

[State 1602, ChangeAnim]
type = ChangeAnim
trigger1 = !movecontact && anim=523457 && root,stateno=1612 && root,AnimElemTime(2)>=0 && time>=160
trigger2 = anim=523457 && (uniqhitcount>=10 || moveguarded)
value = 1604
persistent = 0

[State 1602, PosSet]
type = PosSet
trigger1 = Anim=1604 && pos y < 0
y = 30

[State 1602, VarAdd]
type = VarSet
trigger1 = Anim=1604
fvar(1) = fvar(1) + .005

[State 1602, AngleDraw]
type = AngleDraw
trigger1 = Anim=1604
scale = fvar(1), fvar(1)
value = 0
ignorehitpause = 1

[State 1602, SprPriority]
type = SprPriority
trigger1 = Anim=1604
value = 5

[State 1602, PlaySnd]
type = PlaySnd
trigger1 = Anim=1604
value = 1600,4
persistent = 0

[State 1602, EnvShake]
type = EnvShake
trigger1 = Anim=1604 && time%10=0
time = 10
freq = 90
ampl = 6
phase = 90

[State 1602, DestroySelf]
type = DestroySelf
trigger1 = (root,stateno != [1600,1612]) && Anim!=1604
trigger2 = Anim=1604 && AnimTime=0

;---------------------------------------------------------------------------
;Rasenshuriken (Dash)
[StateDef 1611]
type = S
movetype = A
physics = N
anim = 3061
sprpriority = 2
velset = 10,0
ctrl = 0

[State 100, Run Effect]
type = Explod
trigger1 = !time
anim = 2010
ID = -1
pos = 0,2
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5,0.5
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0

[State 1611, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 1000,2

[State 1611, ChangeState]
type = ChangeState
trigger1 = P2BodyDist X < 25 || FrontEdgeBodyDist < 25
value = 1612
ctrl = 0

;---------------------------------------------------------------------------
;Rasenshuriken (Hit)
[StateDef 1612]
type = S
movetype = A
physics = N
anim = 4051
sprpriority = 2
velset = 0,0
ctrl = 0

[State 1600, Explod]
type = Explod
trigger1 = time = 10 && !NumExplod(5235263)
anim = 356490
ID = 1004
pos = -5,2
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 50
pausemovetime = 99999
supermovetime = 99999
scale = 0.5,0.5
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 100, dust Effect]
type = Explod
trigger1 = time = 55
anim = 356490
ID = -1
pos = -5,2
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.75,0.75
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0

[State 1612, ChaneAnim]
type = ChangeAnim
trigger1 = !NumHelper(1602)
value = 1003
persistent = 0

[State 1612, ChangeState]
type = ChangeState
trigger1 = NumHelper(1602)
trigger1 = helper(1602),anim=1604 && helper(1602),AnimElemTime(10)>=0
value = 1613
ctrl = 0

;---------------------------------------------------------------------------
;Rasenshurken (Hurt)
[StateDef 1613]
type = A
movetype = I
physics = N
anim = 5061

[State 0, LifeAdd];daño futon
type = LifeAdd
trigger1 = 1
value = -25
kill = 0




[State 1613, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 5000,0

[State 1613, VelSet]
type = VelSet
trigger1 = !time
x = -8
y = -13

[State 1613, Gravity]
type = Gravity
trigger1 = pos y < 0 && AnimElemTime(3)>=0

[State 1613, ChangeState]
type = ChangeState
trigger1 = vel y > pos y && time>=5
value = 5050
ctrl = 0

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; Uzumaki rafaga

[Statedef 2000]
type=S
movetype=A
physics=N
poweradd= -300
ctrl=0
sprpriority=2

[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value= 640

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = p2dist x <= 20
value = 640
elem = 2
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck


[State 0, VelSet]
type = VelSet
trigger1 = time  = 0
x = 6
y = 0

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = p2dist x <= 20
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 0
y = 0

[State 240,1]
type=PlaySnd
trigger1= animelem = 4
value=0,1

[State 240,HitDef]
type=HitDef
trigger1=time = 0
attr=S,SA
hitflag = MADF
animtype= diagup          ;light,medium,hard,back,up,diagup
damage= 7
guardflag=
pausetime= 5,100
sparkno= s9998
sparkxy=-10,-20
hitsound=s5,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= 0,-3
air.velocity= 0,-3
fall = 1
guard.dist = 0





[State 240,4]
type=ChangeState
trigger1= movecontact = 1
value= 2004

[State 240,4]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1


;---------------------------------------------------------------------------
; salto hacia atras
[Statedef 2004]
type    = A
physics = N
ctrl = 0
anim = 42
sprpriority = 1

[State 240,1]
type=PlaySnd
trigger1= time = 0
value=14,1

[State 0, Gravity]
type = Gravity
trigger1 =1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2001

;clones uzumaki rafaga
[StateDef 2001]
type = S
movetype = A
physics = N
anim = 3030
ctrl = 0

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,17

[State 0, Helper]
type = Helper
trigger1= time = 0
helpertype = normal
name = "clon de sombra"
ID = 2002
stateno = 2002
pos = 15,0
postype = p2
facing = -1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 0
helpertype = normal
name = "clon de sombra"
ID = 2002
stateno = 2002
pos = -15,0
postype = p2
facing = 1
ownpal = 1

[State 0, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 2005

;---------------------------------------------------------------------------
; salto hacia adelante
[Statedef 2005]
type    = A
physics = A
ctrl = 0
anim = 42
sprpriority = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x <= 0

[State 8305, 4]
type = VelSet
trigger1 = 1
x = (p2Dist X )*0.09
y = (p2Dist Y - 50)*0.09

[State 105, 3]
type = ChangeState
trigger1 = time = 15
value = 2006

; aparece clon rafaga
[Statedef 2002]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16


[State 6003, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,0
postype = p1
scale = .25,.5
removetime = -2
sprpriority = 1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 2003

; clon up attack
[Statedef 2003]
type=S
movetype=A
physics=N
ctrl=0
velset=0,0
sprpriority=2

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 270,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value=260

[State 270,1]
type=PlaySnd
trigger1=Time=2
value=0,1

[State 270,HitDef]
type=HitDef
trigger1=animelem=1
attr=S,SA
animtype= up
damage= 3
guardflag=MA
pausetime=12,10
sparkno=s9998
sparkxy=-5,-40
;hitsound=s5,6
guardsound=s6,0
ground.type=High
ground.slidetime=12
ground.hittime=13
ground.velocity= 0,-7
air.velocity= 0,-7
yaccel = 0.2
fall = 1
fall.recover = 0

[State 240,4]
type=ChangeState
trigger1=!AnimTime
value = 1033

; NARUTO UZUMAKI RAFAGA!!!!
[Statedef 2006]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3040

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 600,1]
type=PlaySnd
trigger1= Time=7
value=0,0

[State 600,HitDef]
type=HitDef
trigger1= animelem = 1
attr= S,SA
damage= 60
hitflag = MADF+
guardflag=
priority =4
pausetime= 30,10
sparkno= s9998
sparkxy= -5,0
hitsound=s5,0
guardsound=s6,0
animtype=Med
ground.type= Trip
ground.slidetime=17
ground.hittime=17
ground.velocity= 0,15
air.velocity= 0,15
fall = 1
guard.dist = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; RASENGAN!

[StateDef 2010]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = -1000

[State 883, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S1,15
volume = 1000

[State 3000:	EnvShake]
type			= EnvShake
trigger1 		= Animelem = 1
time			= 20
freq			= 120
ampl			= -2
phase			= 50

[State 60, Arena Grande atras]
type = Explod
trigger1 = time = 0
anim = 229
ID =  229
pos = -5,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
supermove = 1
pausemove =1
scale = 0.25, 0.3
ontop = 0
shadow = 0,0,0
ownpal = -1
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 228
ID = 229
pos = 0,2
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.25,0.25
ontop = 0
supermove = -1
ownpal = -1

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 0
trigger1 = Anim != 3050
value = 3050

[State 150, 1]
type = ChangeAnim
triggerall = var(0) = 1
trigger1 = Anim != 10350
value = 10350

[State 150, 1]
type = ChangeAnim
triggerall = var(0) = 2
trigger1 = Anim != 4050
value = 4050

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F20,0
volume = 255

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time = 0
time = 80
add = 0,0,0
mul = 256,256,256
sinadd = -100,-100,-100,160

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 80
movetime = 0
ignorehitpause = 1
endcmdbuftime = 80

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(10) >= 200
v = 10
value = 200

[State 0, VarSet]
type = Varadd
trigger1 = var(10) <= 199
v = 10
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10) >= 200
value = 13,6
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
triggerall = var(0)=0
ID = 2020
pos = -10,-16
postype = P1
stateno = 2020
helpertype = normal
name = "rasengan comun"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
triggerall = var(0)=1
ID = 2020
pos = -10,-16
postype = P1
stateno = 7020
helpertype = normal
name = "rasengan comun"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
triggerall = var(0)=2
ID = 2020
pos = -10,-16
postype = P1
stateno = 8020
helpertype = normal
name = "rasengan comun"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, VarSet] ; variable de tiempo contra kamehameha
type = VarSet
trigger1 = time = 0
v = 13
value = 330

[State 0, end]
type = ChangeState
trigger1 = Time >= 30
trigger1 = command != "hold_x"
value = 2011

; corre hacia el enemigo
[StateDef 2011]
type = S
movetype = A
physics = N
ctrl = 0

[State 875, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 229

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 15
value = 30

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = var(0) = 0
trigger1 = anim!= 3060
value = 3060

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = var(0) = 1
trigger1 = anim!= 10360
value = 10360

[State 150, 1]
type = ChangeAnim
triggerall = var(0) = 2
trigger1 = Anim != 10361
value = 10361


[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 2411122
ID = 229
pos = -15,22
postype = p1
removetime = -2
bindtime = 1
removeongethit = 1
scale = 0.5,0.5
ontop = 1
supermove = -1
ownpal = -1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
trigger1= enemy,var(12)>= 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2012
time = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
trigger1= enemy,var(12)<= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2011
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
Triggerall = var(0) = 0
trigger1 = 1
x = 5
y = 0

[State 0, VelSet]
type = VelSet
Triggerall = var(0) = 1 || var(0) = 2
trigger1 = 1
x = 8
y = 0

[State 240,1]
type=PlaySnd
trigger1= p2bodydist x <= 15
value=14,2
volume = 1000
persistent =0
channel = 4

[State 0, end]
type = ChangeState
trigger1 = p2bodydist x <= 15
value = 2012

; golpea con rasengan
[StateDef 2012]
type = S
movetype = I
physics = N
ctrl = 0

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 0 || var(0) = 2
trigger1 = Anim != 3051
value = 3051

[State 150, 1]
type = ChangeAnim
triggerall = var(0) = 1
trigger1 = Anim != 11351
value = 11351



;---------------------------------------
; contra kamehameha  rasengan comun

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 13
value = -1

[State 0, PosAdd]
type = PosAdd
triggerall= enemy,var(12)>= 1
trigger1= command = "x"
trigger2= command = "y"
trigger3= command = "z"
trigger4= command = "a"
trigger5= command = "b"
trigger6= command = "c"
x = 6
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1= enemy,var(12)>= 1
trigger1 = time = 0
trigger1 = prevstateno != 2011
x = -2
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1= enemy,var(12)>= 1
x = 1

[State 0, ChangeState]
type = null;ChangeState
triggerall= enemy,var(12)>= 1
trigger1 = var(13) <= 250
trigger1 = backedgedist <= 5
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall= enemy,var(12)>= 1
trigger1 = var(13) <= 1
value = 0
ctrl = 1


;---------------------------------------




[State 0, VarAdd]
type = VarAdd
triggerall= enemy,var(12)<= 0
trigger1 = time = 0
v = 15
value = -1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall= enemy,var(12)<= 0
;trigger1 = p2bodydist x <= 120
trigger1 = time = 0
trigger1 = prevstateno != 2011
x = -8
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall= enemy,var(12)<= 0
trigger1 = p2bodydist x >= 30
trigger1 = time >= 1
trigger1 = helper(2020),stateno != 2023
trigger1 = helper(2020),stateno != 2025
x = 2
ignorehitpause = 1

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = var(15) >= 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2012
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = var(15) >= 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, end]
type = ChangeState
trigger1 = p2stateno = 2025
value = 2013

[State 0, PosAdd]
type = posAdd
triggerall= enemy,var(12)<= 0
trigger1 = time >= 60
trigger1 = p2movetype != H
trigger1 = p2dist x >= 0
trigger1 = helper(2020),stateno != 2023
trigger1 = helper(2020),stateno != 2025
x = 5

[State 0, ChangeState]
type = ChangeState
triggerall= enemy,var(12)<= 0
trigger1 = time >= 100
trigger1 = p2movetype != H
value = 0
ctrl = 1

[State 0, changestate]
type = changestate
triggerall= enemy,var(12)<= 0
trigger1 = p2dist x < 0
trigger1 = time = 0
trigger1 = prevstateno != 2011
value = 0
ctrl = 1

[State 0, end]
type = ChangeState
triggerall= enemy,var(12)<= 0
trigger1 = time >= 200
trigger2 = numhelper(2020)=0
value = 0
ctrl = 1

; espera
[StateDef 2013]
type = S
movetype = A
physics = N
ctrl = 0

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 0
trigger1 = Anim != 3051
value = 3051

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 1
trigger1 = Anim != 11351
value = 11351

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, ScreenBound]
type = posset
trigger1 = ScreenPos X != [0,320]
trigger1 = p2stateno = 2026
trigger1 = facing = -1
x= 200
y = -40

[State 0, ScreenBound]
type = posset
trigger1 = ScreenPos X != [0,320]
trigger1 = p2stateno = 2026
trigger1 = facing = 1
x= -200
y = -40

[State 5200, 2]
type = Velset
trigger1 = p2stateno = 2026
trigger1 = ScreenPos X != [0,320]
y = -3
x = 5

[State 0, end]
type = ChangeState
trigger1 = p2stateno = 2026
trigger2 = p2movetype != H
trigger2 = time >= 100
value = 500



; bola rasengan generandose
[StateDef 2020]
type = A
movetype = I
physics = N
anim = 3053
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 100
v = 13
value = 100

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 100
v = 13
value = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim != 3060
trigger1 = facing = root,facing
pos = 11,-25

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 3060
trigger1 = facing = root,facing
pos = -9,-29


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet] ;pocicion del siguiente state
type = VarSet
trigger1 = time = 0
v = 14
value = 20

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 2012
value = 2021

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2015]
value = 2023

; bola rasengan rikudou generandose
[StateDef 7020]
type = A
movetype = I
physics = N
anim = 3053
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 100
v = 13
value = 100

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 100
v = 13
value = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim != 10360
trigger1 = facing = root,facing
pos = 5,-22

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 10360
trigger1 = facing = root,facing
pos = 15,-18


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet] ;pocicion del siguiente state
type = VarSet
trigger1 = time = 0
v = 14
value = 20

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 2012
value = 2021

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2015]
value = 2023

; bola rasengan rikudou generandose
[StateDef 8020]
type = A
movetype = I
physics = N
anim = 3053
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 100
v = 13
value = 100

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 100
v = 13
value = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim != 10361
trigger1 = facing = root,facing
pos = -22,-24

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 10361
trigger1 = facing = root,facing
pos = -10,-28


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet] ;pocicion del siguiente state
type = VarSet
trigger1 = time = 0
v = 14
value = 20

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 2012
value = 2021

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2015]
value = 2023


; bola rasengan nivel 1 choca con oponente
[StateDef 2021]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 305299
sprpriority = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 305299

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 30529977

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,var(10) < 60
trigger1 = parent,life > (parent,LifeMax/3)
value = 305299
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,var(10) < 60
trigger1 = parent,life <= (parent,LifeMax/3)
value = 30529977
ignorehitpause = 1


[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2021
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 2020
value = 13,2

[State 0, Explod]
type = Explod
triggerall = root,var(20)= 1
triggerall = enemy,var(20)= 1
trigger1 = movecontact
trigger2 = time = 0
anim = ifelse(random < 500,11010,11012)
pos = 25,0
postype = p1  ;p2,front,back,left,right
random = 2,25
vfacing = ifelse(random < 500,-1,1)
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .25,.25
sprpriority = 100
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 200,HitDef]
type=HitDef
trigger1= enemy,var(12)>= 1
trigger1= 1
attr= S,HA
animtype=Light
damage= 0
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 200,HitDef]
type=HitDef
trigger1= timemod = 6,2
attr= S,HA
animtype=Light
damage= 3
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 200,HitDef]
type=HitDef
trigger1= root,command = "x"
trigger2= root,command = "y"
trigger3= root,command = "z"
trigger4= root,command = "a"
trigger5= root,command = "b"
trigger6= root,command = "c"
trigger7= root,var(59) = 1
trigger7= timemod = 7,0
trigger8= root,var(59) = 1
trigger8= time = 0
trigger9 = time = 0
trigger9 = prevstateno = 2020
attr= S,HA
animtype=Light
damage= 4
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -0.5
air.velocity= -0.5,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 0, VarSet]
type = VarSet
triggerall= enemy,var(12)<= 0
trigger1 = var(13) >= 500
trigger1 = root,var(10) >= 60
v = 13
value = 500

[State 0, VarSet]
type = Varadd
triggerall= enemy,var(12)<= 0
trigger1 = var(13) < 500
trigger1 = root,var(10) >= 60
v = 13
value = 10

[State 0, VarSet]
type = Varadd
triggerall= enemy,var(12)<= 0
trigger1 = timemod = 4,0
trigger1 = var(14) <= 40
trigger1 = root,var(10) >= 60
v = 14
value = 2

;-------------------

[State 0, VarSet]
type = VarSet
triggerall = var(13) >= 250
trigger1 = root,var(10) < 60
trigger2 = enemy,var(12) >= 1
v = 13
value = 250

[State 0, VarSet]
type = Varadd
triggerall = var(13) < 250
trigger1 = root,var(10) < 60
trigger2 = enemy,var(12) >= 1
v = 13
value = 10

[State 0, VarSet]
type = Varadd
triggerall = timemod = 4,0
triggerall = var(14) <= 30
trigger1 = root,var(10) < 60
trigger2 = enemy,var(12) >= 1
v = 14
value = 2

;-----------------

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
trigger1 = facing = root,facing
pos = var(14)+10,-25


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
triggerall= enemy,var(12)<= 0
trigger1 = time >= 130
trigger1 = root,var(10) >= 60
value = 2022

[State 0, ChangeState]
type = ChangeState
triggerall= enemy,var(12)<= 0
trigger1 = time >= 130
trigger1 = root,var(10) < 60
value = 2053




;-----------
; contra kamehameha

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 1
trigger1= enemy,var(12)>= 1
trigger1 = p2stateno = [5000,5999]
value = 2021
persistent = 0


;-----------

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2015]
value = 2023


; arrastra al enemigo
[StateDef 2022]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377


[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 1000
v = 13
value = 1000

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 1000
v = 13
value = 40

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 200,HitDef]
type=HitDef
trigger1= !Time
attr= S,HT
animtype=Light
damage= (root,var(10))*0.3
guardflag=
hitflag= MADF+
priority=20,Hit
pausetime= 0,0
sparkno= -1
guard.dist = 0
p2facing = 1
p1facing = 1
p2stateno = 2025
kill = 0
sprpriority = 1000
ID= 22

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
id = 22
pos = 5,15

[State 0, TargetState]
type = TargetState
trigger1 = FrontEdgeDist <= 0
trigger1 = time >= 2
value = 2026
ID = 22

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 10
y = 0

[State 3040, a8]
type = VelAdd
trigger1 = time>1
x = .1

[State 3040, a8]
type = VelAdd
trigger1 = time>1
trigger1 = pos y >= -70
y = -.05

[State 3040, a8]
type = Velset
trigger1 = pos y <= -85
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist <= 0
trigger1 = time >= 2
value = 2024

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2015]
value = 2023


; bola rasengan Desaparece
[StateDef 2023]
type = A
;movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, VarSet]
type = Varadd
trigger1 = 1
v = 13
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, TargetState]
type = TargetState
trigger1 = time = 0
value = 2026
ID = 22

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 100
mul = 256,256,256
sinadd = -256,-256,-256,400

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
trigger1 = facing = root,facing
pos = 40,-25

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 100


; bola rasengan choca con la pared
[StateDef 2024]
type = A
;movetype = A
physics = N
ctrl = 0
sprpriority = 1000


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,0

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time = 0
value = -((root,var(10))*0.3)
ID = 22
kill = 1

[State 0, TargetState]
type = TargetState
trigger1 = time = 0
value = 2026
ID = 22

[State 0, VarSet]
type = Varadd
trigger1 = 1
v = 13
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 100
mul = 256,256,256
sinadd = -256,-256,-256,400

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 100


; state def p2
[Statedef 2025]
type    = A
movetype= H
physics = N
sprpriority = -10

[State 3250: Auxiliar de arena en el P2]
type		= Helper
triggerall = movehit
trigger1	= time = 0
helpertype	= Normal
name		= "Auxiliar de arena en el P2"
id		= 3295
pos		= 0,0
postype		= p2
facing		= 1
stateno		= 3295
keyctrl		= 0
ownpal		= 1
supermovetime	= 0
pausemovetime	= 0
size.xscale     = 1
size.yscale     = 1



[State 3011,l ]
type = LifeAdd
trigger1 = time <= 100;timemod = 3,0
value = -1
kill = 0

[State 2025, a1]
type = ChangeAnim
triggerall= enemy,var(0)= 0
trigger1 = !Time
value = 5030

[State 2025, a2]
type = ChangeAnim
triggerall= enemy,var(0)= 1
trigger1 = !Time
value = 15030

[State 3040, aa]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[Statedef 2026]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -7
ctrl=0

[State 3011,l ]
type = LifeAdd
trigger1 = !time
value = -1
kill = 1
persistent = 0

[State 3041, a1]
type = ScreenBound
trigger1 = 1
value = 1
;movecamera =1

[State 2025, a1]
type = ChangeAnim
triggerall= enemy,var(0)= 0
trigger1 = !Time
value = 5050

[State 2025, a2]
type = ChangeAnim
triggerall= enemy,var(0)= 1
trigger1 = !Time
value = 15050

[State 3041, av]
type = VelAdd
trigger1 = Time > 30
y = .3

[State 3041, a3]
type = PosFreeze
trigger1 = !Time;BackEdgeBodyDist <= 0
value = 14
persistent = 0

[State 3041, a4]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 3041, en]
type = EnvShake
trigger1 = !Time
time = 35
ampl = -6

[State 3041, s];trigger helper sound
type = StateTypeSet
trigger1 = time = 27
movetype = I

[State 3041, a5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;-------------------------------------------------------------------------
;Auxiliar de arena en el P2
[Statedef 3295]
type    = S
physics = N
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 3

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 2

[State 1420]
type = posadd
trigger1 = 1
x = p2dist X-1

[State 60, Explod atras]
type = Explod
trigger1 = time%2 = 0
anim = 2411122
ID =  7102
pos = 0,5
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
pausemove =1
scale = 0.7, 0.7
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 3290, DestroySelf]
type = DestroySelf
trigger1 = p2stateno != 2024


;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;Super RASENGAN!

[StateDef 2040]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = -1500

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 0
trigger1 = Anim != 3050
value = 3050

[State 150, 1]
type = ChangeAnim
triggerall = var(0) = 1
trigger1 = Anim != 10350
value = 10350

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 2
trigger1 = Anim != 7050
value = 7050

[State 60, Arena Grande atras]
type = Explod
trigger1 = time = 0
anim = 229
ID =  229
pos = -5,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
supermove = 1
pausemove =1
scale = 0.25, 0.3
ontop = 0
shadow = 0,0,0
ownpal = -1
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 228
ID = 229
pos = 0,2
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.25,0.25
ontop = 0
supermove = -1
ownpal = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F20,0
volume = 255

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time = 0
time = 60
add = 0,0,0
mul = 256,256,256
sinadd = -100,-100,-100,120

[State 0, Pause]
type = Pause
trigger1 = time = 1
time = 60
movetime = 1
ignorehitpause = 1
endcmdbuftime = 60

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(10) >= 400
v = 10
value = 400

[State 0, VarSet]
type = Varadd
trigger1 = var(10) <= 399
v = 10
value = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10) >= 200
value = 13,6
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10) >= 400
value = 13,6
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 2050
pos = -10,-16
postype = P1
stateno = 2050
helpertype = normal
name = "rasengan super"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, VarSet] ; variable de tiempo contra kamehameha
type = VarSet
trigger1 = time = 0
v = 13
value = 350

[State 0, end]
type = ChangeState
trigger1 = Time >= 10
trigger1 = command != "hold_y"
value = 2041

; corre hacia el enemigo
[StateDef 2041]
type = S
movetype = A
physics = N
;anim = 20
ctrl = 0

[State 875, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 229

[State 240,1]
type=PlaySnd
trigger1= time = 0
value=14,2
persistent =0
channel = 4

[State 200,HitDef]
type=HitDef
trigger1= time = 0
attr= S,HA
animtype=Light
damage= 1
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 15
value = 40

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = var(0) = 0 || var(0) = 2
trigger1 = anim!= 99
value = 99

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = var(0) = 1
trigger1 = anim!= 199
value = 199

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2042
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 9
y = 0

[State 0, end]
type = ChangeState
trigger1 = movecontact
trigger2 = p2dist x <= 0
value = 2042

; golpea con rasengan
[StateDef 2042]
type = S
movetype = I
physics = N
ctrl = 0
hitcountpersist = 1000


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = var(0) = 0 || var(0) = 2
trigger1 = anim!= 90
value = 90

[State 0, 1]
type = ChangeAnim
triggerall = var(0) = 1
trigger1 = Anim != 1090
value = 1090



;---------------------------------------
; contra kamehameha

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 13
value = -1

[State 0, PosAdd]
type = PosAdd
triggerall= enemy,var(12)>= 1
trigger1= command = "x"
trigger2= command = "y"
trigger3= command = "z"
trigger4= command = "a"
trigger5= command = "b"
trigger6= command = "c"
x = 8
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1= enemy,var(12)>= 1
trigger1 = time = 0
trigger1 = prevstateno != 2041
x = -2
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1= enemy,var(12)>= 1
x = 1

[State 0, ChangeState]
type = null;ChangeState
triggerall= enemy,var(12)>= 1
trigger1 = var(13) <= 250
trigger1 = backedgedist <= 5
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall= enemy,var(12)>= 1
trigger1 = var(13) <= 1
value = 0
ctrl = 1


;---------------------------------------

[State 0, PosAdd]
type = PosAdd
trigger1= enemy,var(12)<= 0
;trigger1 = p2bodydist x <= 60
trigger1 = time = 0
trigger1 = prevstateno != 2041
x = -8
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall= enemy,var(12)<= 0
trigger1 = p2bodydist x >= 30
trigger1 = time >= 1
trigger1 = helper(2050),stateno != 2023
trigger1 = helper(2050),stateno != 2025
x = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = enemy,var(12)<= 0
v = 15
value = -1

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = var(15) >= 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2042
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = var(15) >= 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, end]
type = ChangeState
trigger1 = p2stateno = 2025
value = 2013

[State 0, PosAdd]
type = PosAdd
triggerall= enemy,var(12)<= 0
trigger1 = time >= 60
trigger1 = p2movetype != H
trigger1 = p2dist x >= 0
trigger1 = helper(2050),stateno != 2023
trigger1 = helper(2050),stateno != 2025
x = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 100
trigger1 = p2movetype != H
value = 0
ctrl = 1

[State 0, changestate]
type = changestate
triggerall= enemy,var(12)<= 0
trigger1 = p2dist x < 0
trigger1 = time = 0
trigger1 = prevstateno != 2041
value = 0
ctrl = 1

[State 0, end]
type = ChangeState
triggerall= enemy,var(12)<= 0
trigger1 = time >= 200
trigger2 = numhelper(2050)=0
value = 0
ctrl = 1

; bola super rasengan generandose
[StateDef 2050]
type = A
movetype = I
physics = N
;anim = 3053
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

;[State 0, ChangeAnim]
;type = ChangeAnim
;trigger1 = time = 0
;trigger1 = parent,life <= (parent,LifeMax/3)
;value = 305377

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3055
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = 1,1
sprpriority = 500
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13
;channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 150
v = 13
value = 150

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 150
v = 13
value = 4



[State 0, BindToRoot]
type = BindToRoot
trigger1 = facing = root,facing
trigger1 = root,stateno = 2040
pos = 9,-24


[State 0, BindToRoot]
type = BindToRoot
trigger1 = facing = root,facing
trigger1 = root,stateno = 2041
pos = 40,-25


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow


; pocicion en siguiente state
[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = 28

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 2042
value = 2051

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2045]
value = 2023


; bola rasengan choca con oponente
[StateDef 2051]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3052

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305277

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2051
time = 1
ignoreitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignoreitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 2050
value = 13,2

[State 200,HitDef]
type=HitDef
trigger1= enemy,var(12)>= 1
trigger1= 1
attr= S,HA
animtype=Light
damage= 0
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 0, Explod]
type = Explod
triggerall = root,var(20)= 1
triggerall = enemy,var(20)= 1
trigger1 = movecontact
trigger2 = time = 0
anim = ifelse(random < 500,11010,11012)
pos = 25,0
postype = p1  ;p2,front,back,left,right
random = 2,25
vfacing = ifelse(random < 500,-1,1)
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .25,.25
sprpriority = 100
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 200,HitDef]
type=HitDef
trigger1= timemod = 6,2
attr= S,HA
animtype=Light
damage= 4
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 200,HitDef]
type=HitDef
trigger1= root,command = "x"
trigger2= root,command = "y"
trigger3= root,command = "z"
trigger4= root,command = "a"
trigger5= root,command = "b"
trigger6= root,command = "c"
trigger7= root,var(59) = 1
trigger7= timemod = 7,0
trigger8= root,var(59) = 1
trigger8= time = 0
trigger9 = time = 0
trigger9 = prevstateno = 2050
attr= S,HA
animtype=Light
damage= 4
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -0.5
air.velocity= -0.5,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 400
v = 13
value = 400

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 400
v = 13
value = 10

[State 0, VarSet]
type = Varadd
trigger1 = timemod = 5,0
trigger1 = var(14) <= 35
v = 14
value = 2

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
trigger1 = facing = root,facing
pos = var(14)+10,-25

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1= enemy,var(12)<= 0
trigger1 = time >= 130
trigger1 = root,var(10) >= 120
value = 2052

[State 0, ChangeState]
type = ChangeState
trigger1= enemy,var(12)<= 0
trigger1 = time >= 130
trigger1 = root,var(10) < 120
value = 2053


;-----------
; contra kamehameha

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 1
trigger1= enemy,var(12)>= 1
trigger1 = p2stateno = [5000,5999]
value = 2051
persistent = 0


;-----------

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2045]
value = 2023


; arrastra al enemigo
[StateDef 2052]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 1000
v = 13
value = 1000

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 1000
v = 13
value = 30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 200,HitDef]
type=HitDef
trigger1= !Time
attr= S,HT
animtype=Light
damage= (root,var(10))*0.3
guardflag=
hitflag= MADF+
priority=20,Hit
pausetime= 0,0
sparkno= -1
guard.dist = 0
p2facing = 1
p1facing = 1
p2stateno = 2025
kill = 0
sprpriority = 1000
ID= 22

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
id = 22
pos = 5,15

[State 0, TargetState]
type = TargetState
trigger1 = FrontEdgeDist <= 0
trigger1 = time >= 2
value = 2026
ID = 22

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 10
y = 0

[State 3040, a8]
type = VelAdd
trigger1 = time>1
x = .1

[State 3040, a8]
type = VelAdd
trigger1 = time>1
trigger1 = pos y >= -70
y = -.05

[State 3040, a8]
type = Velset
trigger1 = pos y <= -85
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist <= 0
trigger1 = time >= 2
value = 2024

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2010,2045]
value = 2023



; Hace un hit simple
[StateDef 2053]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life > (parent,LifeMax/3)
value = 3053

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = parent,life <= (parent,LifeMax/3)
value = 305377

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 200,HitDef]
type=HitDef
trigger1= !Time
attr= S,HT
animtype=Light
damage= (root,var(10))*0.3
guardflag=
hitflag= MADF+
priority=20,Hit
pausetime= 0,0
sparkno= -1
guard.dist = 0
fall = 1
sprpriority = 1000
ground.type = High
ground.velocity = -6,-4
air.velocity = -6,-4

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
trigger1 = facing = root,facing
pos = var(14)+10,-25

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 10
value = 2023

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; KIUBY RASENGAN! solo con chacra rojo

[StateDef 2060]
type = S
movetype = A
physics = N
ctrl = 0
poweradd = -3000

[State 0, BGPalFX]
type = BGPalFX
trigger1 = anim != 3056
time = 500
sinadd = -100,-100,-100,1000
ignorehitpause = 1
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 13056
value = 13056

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 14,4

[State 0, PowerSet]
type = PowerSet
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = prevstateno != 2060
v = 15
value = 0

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2060
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, Helper]
type = Helper
trigger1 = time = 30
trigger1 = numhelper(2070)=0
ID = 2070
pos = -5,-20
postype = P1
stateno = 2070
helpertype = player
name = "rasengan kiuby"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, end]
type = ChangeState
trigger1 = var(15)= 70
value = 2061

; grita rasengan y da poder de choque
[StateDef 2061]
type = S
movetype = A
physics = N
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 15
value = 70

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2062
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 240,1]
type=PlaySnd
trigger1= time = 0
value=14,2
channel = 4

[State 0, end]
type = ChangeState
trigger1 = time = 0
value = 2062

; golpea con rasengan
[StateDef 2062]
type = S
movetype = I
physics = N
anim = 13051
ctrl = 0
hitcountpersist = 1000

[State 0, PowerSet]
type = PowerSet
trigger1 = 1
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15
value = -1

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = var(15) >= 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2062
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = var(15) >= 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, end]
type = ChangeState
trigger1 = time >= 270
trigger2 = numhelper(2070)=0
value = 0
ctrl = 1

; bola kiuby rasengan generandose
[StateDef 2070]
type = A
movetype = I
physics = N
anim = 7235253
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, VarAdd];definir variable de vida de la bola
type = Varset
trigger1 = time = 0
v = 23
value = 40

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 200,HitDef]
type=HitDef
trigger1= timemod = 3,2
trigger1= time >= 60
attr= S,HA
animtype=Light
damage= 1
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13
;channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 1500
v = 13
value = 1500

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 1500
v = 13
value = 10

;--------------------------------------------

[State 0, VarSet] ; poder de choque
type = parentVarSet
trigger1 = var(13) >= 1500
v = 15
value = 70

;------------------------------------------

[State 0, VarSet]
type = Varadd
trigger1 = timemod = 2,0
trigger1 = var(14) >= -93
v = 14
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = -30

;[State 0, BindToRoot]
;type = BindToRoot
;trigger1 = 1
;pos = -5,var(14)-15

[State 1502, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = -5, -100

;[State 0, Trans]
;type = Trans
;trigger1 = 1
;trans = add

[State 1502, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1


[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .1+ (var(13)*0.0003),.1+(var(13)*0.0003)


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = [2061,2062]
value = 2071

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2060,2065]
value = 2073

; bola rasengan comienza a caer
[StateDef 2071]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeState]
type = ChangeState
trigger1 = var(23) <= 1
value = 2073
ignorehitpause = 1


;---------------------
[State 0, VarAdd]  ; variable de vida de la bola
type = VarAdd
trigger1 = time = 0
v = 23
value = -1
;---------------------

[State 0, Width]
type = Width
trigger1 = 1
value = 60,60

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 7235253
value = 7235253

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2071
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 2070
value = 13,2

[State 200,HitDef]
type=HitDef
trigger1= enemy,var(12)>= 1
trigger1= 1
attr= S,HA
animtype=Light
damage= 0
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 200,HitDef]
type=HitDef
trigger1= timemod = 3,2
attr= S,HA
animtype=Light
damage= 5
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 1502, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .1+ (var(13)*0.0003),.1+(var(13)*0.0003)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 2070
x = 6
y = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .075

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = -.11


[State 0, VelSet]
type = VelSet
trigger1 = pos y >= -45
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= -45
value = 2072

[State 0, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
trigger1 = root,stateno != [2060,2065]
value = 2073

; choca con el suelo y explota
[StateDef 2072]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 30520

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
trigger1 = prevstateno = 2071
time = 200
freq = 40
ampl = -4
phase = 90

[State 0, ChangeState]
type = ChangeState
trigger1 = var(23) <= 1
value = 2073
ignorehitpause = 1

;---------------------
[State 0, VarAdd]  ; variable de vida de la bola
type = VarAdd
trigger1 = time = 0
v = 23
value = -1
;---------------------

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2072
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 200,HitDef]
type=HitDef
trigger1= enemy,var(12)>= 1
trigger1= 1
attr= S,HA
animtype=Light
damage= 0
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 200,HitDef]
type=HitDef
trigger1= timemod = 3,2
attr= S,HA
animtype=Light
damage= 5
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0
sprpriority = 1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 2071
value = 13,11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1502, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 60
value = 2074

[State 0, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
trigger1 = root,stateno != [2060,2065]
value = 2073


; bola kiuby rasengan Desaparece
[StateDef 2073]
type = A
;movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 30530

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, VarSet]
type = Varadd
trigger1 = 1
v = 13
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 100
mul = 256,256,256
sinadd = -256,-256,-256,400

[State 1502, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 100


; se expande
[StateDef 2074]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 30520



[State 0, ChangeState]
type = ChangeState
trigger1 = var(23) <= 1
value = 2073
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2074
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 7000
v = 13
value = 105


;---------------------
[State 0, VarAdd]  ; variable de vida de la bola
type = VarAdd
trigger1 = time = 0
v = 23
value = -1
;---------------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 2072
value = 13,11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 2072
value = 14,5

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1502, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, Helper]
type = Helper
trigger1 = timemod = 20,0
helpertype = normal
name = "onda expansiva"
ID = 2075
facing = 1
stateno = 2075
pos = 0,0
postype = p1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = timemod = 20,0
helpertype = normal
name = "onda expansiva"
ID = 2075
facing = -1
stateno = 2075
pos = 0,0
postype = p1
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 150
value = 2073

[State 0, ChangeState]
type = ChangeState
trigger1 = root,movetype = H
trigger1 = root,stateno != [2060,2065]
value = 2073


; daño de onda expanciva
[StateDef 2075]
anim = 3057
ctrl = 0
type = S
movetype = A
physics = N

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 6
y = 0

[State 217, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
;animtype  = up
damage    = 55
hitflag = MADF
guardflag =
sparkno = -1
sparkxy = 0,0
pausetime = 0,20
ground.type = low
ground.slidetime = 20
ground.hittime  = 50
ground.velocity = -3,-10
air.velocity = -3,-10
fall = 1
guard.dist = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 100



;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; ESTILO DE VIENTO RASEN SHIURIKEN!

[StateDef 2080]
type = S
movetype = A
anim = 3050
physics = S
ctrl = 0
poweradd = -1000

[State 883, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S1,15
volume = 1000


[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 180
anim = -1
pos = 0,0
movetime = 180
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Super-Charge"
ID = 6801
stateno = 6801
pos = 5,-35
size.yscale = 1
size.xscale = 1
postype = p1   ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 229
ID = 229
pos = -5,0
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.5,0.5
ontop = 0
ownpal = 1
supermovetime = -1
pausemovetime = -1

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 228
ID = 229
pos = 0,2
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.4,0.4
ontop = 0
ownpal = 1
supermovetime = -1
pausemovetime = -1

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 15,0
postype = P1
stateno = 2099
helpertype = normal
name = "clon izquierdo"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 0,0
postype = P1
stateno = 2099
helpertype = normal
name = "clon izquierdo"
ownpal = 1
facing = -1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2090
pos = -10,-16
postype = P1
stateno = 2090
helpertype = normal
name = "rasen shiuriken"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time = 160
trigger1 = Anim != 3056
value = 3056

[State 240,1]
type=PlaySnd
trigger1= time = 140
value= 117,0
persistent =0
channel = 4

[State 0, end]
type = ChangeState
trigger1 = Time >= 250
value = 2081

; ESTILO DE VIENTO RASEN SHIURIKEN rikudou!

[StateDef 6080]
type = S
movetype = A
anim = 10350
physics = S
ctrl = 0
poweradd = -1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 883, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S1,15
volume = 1000

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 229
ID = 229
pos = -5,0
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.5,0.5
ontop = 0
supermovetime = -1
pausemovetime = -1

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 228
ID = 229
pos = 0,2
postype = p1
removetime = -1
bindtime = -1
removeongethit = 1
scale = 0.4,0.4
ontop = 0
supermovetime = -1
pausemovetime = -1

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 200
anim = -1
pos = 0,0
movetime = 200
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Super-Charge"
ID = 6801
stateno = 6801
pos = 5,-35
size.yscale = 1
size.xscale = 1
postype = p1   ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 6,-7
postype = P1
stateno = 11100
helpertype = normal
name = "Mano Kiuby"
ontop=1
supermovetime = 1000
pausemovetime = 1000


[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 7090
pos = -10,-16
postype = P1
stateno = 7090
helpertype = normal
name = "rasen shiuriken"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time = 160
trigger1 = Anim != 10356
value = 10356

[State 240,1]
type=PlaySnd
trigger1= time = 140
value= 117,0
persistent =0
channel = 4

[State 0, end]
type = ChangeState
trigger1 = Time >= 230
value = 6081

;Lo lanza!
[StateDef 2081]
type = S
movetype = A
physics = S
ctrl = 0

[State 875, RemoveExplod]
type = RemoveExplod
trigger1 = time = 8
id = 229

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 15
value = 100

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 333
value = 333

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2081
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = 0

[State 0, end]
type = ChangeState
trigger1 = time >= 100
value = 0
ctrl = 1

;Lo lanza!
[StateDef 6081]
type = S
movetype = A
physics = S
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 15
value = 100

[State 875, RemoveExplod]
type = RemoveExplod
trigger1 = time = 8
id = 229


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 1333
value = 1333

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 6081
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = 0


[State 0, end]
type = ChangeState
trigger1 = time >= 100
value = 0
ctrl = 1


; golpea con futon rasen shiuriken
[StateDef 2082]
type = S
movetype = I
physics = N
anim = 3051
ctrl = 0
hitcountpersist = 1000


[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15
value = -1
ignorehitpause = 1

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = var(15) >= 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 2082
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = var(15) >= 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, end]
type = ChangeState
trigger1 = time >= 200
trigger2 = numhelper(2090)=0
value = 0
ctrl = 1

;-------------------------------------------------



; rasen shiuriken generandose
[StateDef 2090]
type = A
movetype = I
physics = N
anim = 3058
ctrl = 0
sprpriority = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 2990
pos = 0,0
postype = P1
stateno = 2990
helpertype = normal
name = "bola de energia"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%15) = 0)
value = 13,6

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 600
v = 13
value = 600

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 600
v = 13
value = 1

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 600
trigger1 = root,anim = 3056 ||anim = 10356
v = 13
value = 6

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 3050 || anim = 10350
pos = 10,-25


;---------------------

[State 0, VarSet]
type = Varadd
trigger1 = timemod = 2,0
trigger1 = var(14) >= -45
trigger1 = root,anim = 3056 ||anim = 10356
v = 14
value = -1


[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = -40

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 3056 ||anim = 10356
trigger2 = root,anim = 3061
pos = -8,var(14)-10


;---------------------

[State 0, AngleAdd]
type = Angleset
trigger1 = root,anim = 3061
value = 20

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,anim = 3050
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.8

[State 0, AngleDraw]
type = AngleDraw
Triggerall = var(0) = 1
trigger1 = root,anim = 10350
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.8

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,anim != 3050
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AngleDraw]
type = AngleDraw
Triggerall = var(0) = 1
trigger1 = root,anim != 10350
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [2080,2085]
value = 2093

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 2081
value = 2991

; rasen shiuriken generandose
[StateDef 7090]
type = A
movetype = I
physics = N
anim = 3058
ctrl = 0
sprpriority = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 2990
pos = 0,0
postype = P1
stateno = 2990
helpertype = normal
name = "bola de energia"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%15) = 0)
value = 13,6

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 600
v = 13
value = 600

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 600
v = 13
value = 1


[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 600
trigger1 = root,anim = 10356
v = 13
value = 6

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 10350
pos = 5,-15

;---------------------

[State 0, VarSet]
type = Varadd
trigger1 = timemod = 2,0
trigger1 = var(14) >= -45
trigger1 = root,anim = 10356
v = 14
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = -40


[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,anim = 10356
trigger2 = root,anim = 10361
pos = -15,var(14)+10

;---------------------

[State 0, AngleAdd]
type = Angleset
trigger1 = root,anim = 3061
value = 20

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,anim = 3050
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.8

[State 0, AngleDraw]
type = AngleDraw
Triggerall = var(0) = 1
trigger1 = root,anim = 10350
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.8

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,anim != 3050
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AngleDraw]
type = AngleDraw
Triggerall = var(0) = 1
trigger1 = root,anim != 10350
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [6080,6085]
value = 2093

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 6081
value = 2991









; esfera de luz
[StateDef 2990]
type = A
movetype = I
physics = N
anim = 3053;3079
ctrl = 0
sprpriority = 1000

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1
;---------------------

[State 0, AngleAdd]
type = Angleset
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = (parent,var(13)*0.00005),(parent,var(13)*0.00005)

;[State 0, AngleDraw]
;type = AngleDraw
;trigger1 = parent,stateno = 2093
;scale = (parent,var(13)*0.000025),(parent,var(13)*0.000025)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PalFXWiz]
type = PalFX
trigger1 = parent,stateno = 2093
time = 60
mul = 256,256,256
sinadd = -256,-256,-256,240
persistent = 0

[State 0, ChangeState]
type = destroyself
trigger1 = parent,stateno = 2093
trigger1 = parent,time >= 60





; futon rasen shiuriken es lanzado
[StateDef 2991]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 1

[State 8305, 4]
type = VelSet
trigger1 = time >= 5
x = 16
y = (p2Dist Y - 20)*0.0001

;[State 8305, 4]
;type = VelSet
;trigger1 = 1
;x = (p2Dist X )*0.12
;y = (p2Dist Y - 25)*0.12

[State 0, AngleAdd]
type = Angleset
trigger1 = time = 0
value = 40

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,2

[State 200,HitDef]
type=HitDef
trigger1= 1
attr= S,HA
animtype=Light
damage= 5
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s13,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
sprpriority = 1000
kill = 0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 2091

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 150
value = 2092

; futon rasen shiuriken choca con oponente
[StateDef 2091]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 8305, 4]
type = VelSet
trigger1 = 1
x = (p2Dist X )*0.9
y = (p2Dist Y - 25)*0.9

[State 0, AngleAdd]
type = Angleset
trigger1 = time = 0
value = 40

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,2

[State 200,HitDef]
type=HitDef
trigger1= timemod = 4,0
attr= S,HA
animtype=Light
damage= 2
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s13,4
guardsound=s6,0
ground.type=High
ground.slidetime=100
ground.hittime=100
air.slidetime=100
air.hittime=100
ground.velocity= -.5,-2.8
air.velocity= -0.3-(time*0.1),-2.1
guard.dist = 0
sprpriority = 1000
kill = 0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 100
value = 2092

; futon rasen explota!
[StateDef 2092]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, VelSet]
type = VelSet
trigger1 = p2dist x != [-60,60]
x = 0
y = 0

[State 8305, 4]
type = VelSet
trigger1 = p2dist x = [-60,60]
x = (p2Dist X )*0.9
y = (p2Dist Y - 25)*0.9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,9

[State 200,HitDef]
type=HitDef
trigger1= time = 0
attr= S,HA
animtype=Light
damage= 10
guardflag=
hitflag= MADF
priority=100,Hit
pausetime= 0,100
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=30
ground.hittime=30
ground.velocity= -3,-10
air.velocity= -3,-10
guard.dist = 0
sprpriority = 1000
fall = 1
fall.recover = 0

[State 200,HitDef]
type=HitDef
trigger1= time = 20
attr= S,HA
animtype=Light
damage= 350
guardflag=
hitflag= MADF
priority=100,Hit
pausetime= 0,120
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=30
ground.hittime=30
ground.velocity= -5,-9
air.velocity= -5,-9
guard.dist = 0
sprpriority = 1000
fall = 1
fall.recover = 0



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = globalnoshadow

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 6000
trigger1 = time <= 25
v = 13
value = 100

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 6000
trigger1 = time >= 25
v = 13
value = 300

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time = 90
time = 100
mul = 256,256,256
sinadd = 256,256,256,200
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 60
value = 2093

; bola rasengan Desaparece
[StateDef 2093]
type = A
;movetype = A
physics = N
ctrl = 0
sprpriority = 1000

[State 0, VarSet]
type = Varadd
trigger1 = 1
v = 13
value = -100

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 61
mul = 256,256,256
sinadd = -256,-256,-256,244

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),(.001+(var(13)*0.0001))*0.5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 61

;-------------------------------------------------------------------------------
; clon que mueve las manos
[Statedef 2099]
type=A
movetype=A
physics=N
ctrl=0
sprpriority= 2
anim = 3012

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3059
trigger1 = facing != root,facing
value = 3059

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = animelem = 3
value = 13,5

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 196
pos = -40,5
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 6
value = 3059

[State 0, Explod]
type = Explod
trigger1 = time = 150
anim = 196
pos = -40,5
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 150
value = 12,16

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time = 156

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; clon que mueve las manos
[Statedef 11100]
type=A
movetype=A
physics=N
ctrl=0
sprpriority= 2
anim = 3012

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 10351
trigger1 = facing != root,facing
value = 10351

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = animelem = 3
value = 13,5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 6
value = 10351

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 148
value = 10352

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time = 156



;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; Super Uzumaki rafaga

[Statedef 3000]
type=S
movetype=A
physics=N
poweradd= -1000
ctrl=0
sprpriority=2

[State 240,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value= 640

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = p2dist x <= 20
value = 640
elem = 2
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck


[State 0, VelSet]
type = VelSet
trigger1 = time  = 0
x = 6
y = 0

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = p2dist x <= 20
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 0
y = 0

[State 240,1]
type=PlaySnd
trigger1= animelem = 4
value=0,1

[State 240,HitDef]
type=HitDef
trigger1=time = 0
attr=S,SA
hitflag = MADF
animtype= diagup          ;light,medium,hard,back,up,diagup
damage= 7
guardflag=
pausetime= 5,100
sparkno= s9998
sparkxy=-10,-20
hitsound=s5,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= 0,-3
air.velocity= 0,-3
fall = 1
guard.dist = 0
kill = 0

[State 240,4]
type=ChangeState
trigger1= movecontact = 1
value= 3004

[State 240,4]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1


;---------------------------------------------------------------------------
; salto hacia atras
[Statedef 3004]
type    = A
physics = N
ctrl = 0
anim = 42
sprpriority = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = -1
pos = 0,0
movetime = 40
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Super-Charge"
ID = 6801
stateno = 6801
pos = 5,-35
size.yscale = 1
size.xscale = 1
postype = p1   ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999


[State 0, Gravity]
type = Gravity
trigger1 =1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3001

;clones uzumaki rafaga
[StateDef 3001]
type = S
movetype = A
physics = N
anim = 3030
ctrl = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 180
mul = 256,256,256
sinadd = -100,-100,-100,360

[State 240,1]
type=PlaySnd
trigger1= time = 0
value=14,1

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 50
movetime = 50

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,17

[State 0, Helper]
type = Helper
trigger1= time = 50
helpertype = normal
name = "clon de sombra"
ID = 3002
stateno = 3002
pos = 15,0
postype = p2
facing = -1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1= time = 50
helpertype = normal
name = "clon de sombra"
ID = 3002
stateno = 3002
pos = -15,0
postype = p2
facing = 1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1= time = 95
trigger2= time = 140
helpertype = normal
name = "clon de sombra patada"
ID = 3008
stateno = 3008
pos = 70,30
postype = p2
facing = -1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1= time = 95
trigger2= time = 140
helpertype = normal
name = "clon de sombra patada"
ID = 3008
stateno = 3008
pos = -70,30
postype = p2
facing = 1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000


[State 0, Helper]
type = Helper
trigger1= time = 120
trigger2= time = 165
helpertype = normal
name = "clon de sombra patada"
ID = 3010
stateno = 3010
pos = 65,-30
postype = p2
facing = -1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1= time = 120
trigger2= time = 165
helpertype = normal
name = "clon de sombra patada"
ID = 3010
stateno = 3010
pos = -65,-30
postype = p2
facing = 1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, end]
type = ChangeState
trigger1 = Time >= 185
value = 3005

;---------------------------------------------------------------------------
; salto hacia adelante
[Statedef 3005]
type    = A
physics = A
ctrl = 0
anim = 42
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15,4

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x <= 0

[State 8305, 4]
type = VelSet
trigger1 = 1
x = (p2Dist X )*0.09
y = (p2Dist Y - 50)*0.09

[State 105, 3]
type = ChangeState
trigger1 = time = 15
value = 3006

; aparece clon rafaga
[Statedef 3002]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 6003, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,0
postype = p1
scale = .25,.5
removetime = -2
sprpriority = 1000


[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 3003

; clon up attack
[Statedef 3003]
type=S
movetype=A
physics=N
ctrl=0
velset=0,0
sprpriority=2

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 270,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value=260

[State 270,1]
type=PlaySnd
trigger1=Time=2
value=0,1

[State 270,HitDef]
type=HitDef
trigger1=animelem=1
attr=S,SA
animtype= up
damage= 5
hitflag= MADF
guardflag=
pausetime=12,10
sparkno=s9998
sparkxy=-5,-40
;hitsound=s5,6
guardsound=s6,0
ground.type=High
ground.slidetime=12
ground.hittime=13
ground.velocity= 0,-7
air.velocity= 0,-7
yaccel = 0.2
fall = 1
fall.recover = 0
GUARD.dist = 0

[State 240,4]
type=ChangeState
trigger1=!AnimTime
value = 1033

; NARUTO UZUMAKI RAFAGA!!!!
[Statedef 3006]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3040

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 600,1]
type=PlaySnd
trigger1= Time=7
value=0,0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = movecontact
time = 50
mul = 256,256,256
sinadd = 256,256,256,100
persistent = 0
ignorehitpause = 1

[State 600,HitDef]
type=HitDef
trigger1= animelem = 1
attr= S,HA
damage= 120
hitflag = MADF+
guardflag=
priority =4
pausetime= 50,20
sparkno= s9998
sparkxy= -5,0
hitsound=s5,0
guardsound=s6,0
animtype=Med
ground.type= Trip
ground.slidetime=17
ground.hittime=17
ground.velocity= 0,10
air.velocity= 0,10
fall = 1
guard.dist = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------


; aparece
[Statedef 3008]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 6003, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,0
postype = p1
scale = .25,.5
removetime = -2
sprpriority = 1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 3009

; clon air attack
[Statedef 3009]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 270

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, Gravity]
type = veladd
trigger1 = pos y < 0
y = .3

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = -4

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 240,1]
type=PlaySnd
trigger1=Time=2
value=0,1

[State 240,HitDef]
type=HitDef
trigger1=AnimElem=1
attr=S,NA
animtype= up
damage= 15
hitflag = MADF
guardflag=MA
pausetime= 0,25
sparkno=s9998
sparkxy=-10,-20
hitsound=s5,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= 0,-4
air.velocity= 0,-4
fall = 1

[State 240,4]
type=ChangeState
trigger1= Time >= 25
value = 1033



;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------


; aparece
[Statedef 3010]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 6003, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,0
postype = p1
scale = .25,.5
removetime = -2
sprpriority = 1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 3011

; clon air attack
[Statedef 3011]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 270

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, Gravity]
type = veladd
trigger1 = pos y < 0
y = .3

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 240,1]
type=PlaySnd
trigger1=Time=2
value=0,1

[State 240,HitDef]
type=HitDef
trigger1=AnimElem=1
attr=S,NA
animtype= up
damage= 15
hitflag = MADF
guardflag=MA
pausetime= 0,40
sparkno=s9998
sparkxy=-10,-20
hitsound=s5,4
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= 0,-2
air.velocity= 0,-2
fall = 1

[State 240,4]
type=ChangeState
trigger1= Time >= 25
value = 1033





;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;ODAMA RASENGAN!

[StateDef 3040]
type = S
movetype = A
physics = S
anim = 3050
ctrl = 0
poweradd = -2000


[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 100
anim = -1
pos = 0,0
movetime = 100
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Super-Charge"
ID = 6801
stateno = 6801
pos = 5,-35
size.yscale = 1
size.xscale = 1
postype = p1   ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 200
mul = 256,256,256
sinadd = -100,-100,-100,400

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 10
value = 200 ;(poder del rasengan)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,7

[State 0, Helper]
type = Helper
trigger1 = time = 0
priority = 10000
ID = 3043
pos = -15,0
postype = P1
stateno = 3043
helpertype = normal
name = "clon que crea rasengan"
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 3050
pos = -10,-16
postype = P1
stateno = 3050
helpertype = normal
name = "rasengan super"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000


[State 0, Helper]
type = null;Helper
trigger1 = time = 0
ID = 3044
pos = -27,0
postype = P2
stateno = 3044
helpertype = normal
name = "clon que sostiene"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, end]
type = ChangeState
trigger1 = Time >= 150
value = 3041

;clon
[StateDef 3043]
type = S
movetype = A
physics = N
anim = 3012
ctrl = 0
sprpriority = 10005

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 6
value = 3063

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16


[State 6003, Explod]
type = Explod
trigger1 = time = 0
anim = 17000
pos = 0,0
postype = p1
scale = .5,.5
removetime = -2
ontop = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, end]
type = ChangeState
trigger1 = Time >= 120
value = 1033

; corre hacia el enemigo
[StateDef 3041]
type = S
movetype = A
physics = N
;anim = 20
ctrl = 0

[State 200,HitDef]
type=HitDef
trigger1= time = 0
attr= S,HA
animtype=Light
damage= 1
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 15
value = 40

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 90
value = 90

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 3042
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 7
y = 0

[State 240,1]
type=PlaySnd
trigger1= movecontact
value=14,2
persistent =0
channel = 4

[State 0, end]
type = ChangeState
trigger1 = movecontact
trigger2 = p2dist x <= 0
value = 3042

; golpea con rasengan
[StateDef 3042]
type = S
movetype = I
physics = N
ctrl = 0
hitcountpersist = 1000

[State 0, PosAdd]
type = PosAdd
;trigger1 = p2bodydist x <= 60
trigger1 = time = 0
trigger1 = prevstateno != 3041
x = -8

[State 0, PosAdd]
type = PosAdd
trigger1 = p2bodydist x >= 30
trigger1 = time >= 1
trigger1 = helper(3050),stateno != 3053
trigger1 = helper(3050),stateno != 3052
trigger1 = helper(3050),stateno != 3054
x = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15
value = -1

[State 0, LifeAdd];esto es lo que saca vida
type = LifeAdd
trigger1 = time = 0
value = -gethitvar(damage)
kill = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = var(15) >= 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 3042
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = var(15) >= 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = p2stateno = 3055
trigger2 = p2stateno = 3056
value = 3060

[State 0, PosAdd]
type = PosAdd
trigger1 = time >= 60
trigger1 = p2movetype != H
trigger1 = p2dist x >= 0
trigger1 = helper(3050),stateno != 3053
trigger1 = helper(3050),stateno != 3052
trigger1 = helper(3050),stateno != 3054
x = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 100
trigger1 = p2movetype != H
value = 0
ctrl = 1

[State 0, end]
type = ChangeState
trigger1 = time >= 200
trigger2 = numhelper(3050)=0
value = 0
ctrl = 1

[State 0, changestate]
type = changestate
trigger1 = p2dist x < 0
trigger1 = time = 0
trigger1 = prevstateno != 3041
value = 0
ctrl = 1

;--------------------------------------------------------------










;--------------------------------------------------------------

; odama rasengan generandose
[StateDef 3050]
type = A
movetype = I
physics = N
anim = 40530
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 3066
trigger1 = parent,life <= (parent,LifeMax/3)
value = 3066


[State 0, Explod]
type = Explod
trigger1 = timemod = 15,0
trigger1 = root,stateno = [3040,3050]
trigger1 = parent,life > (parent,LifeMax/3)
anim = 3055
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = 1,1
sprpriority = 500
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = timemod = 15,0
trigger1 = root,stateno = [3060,3070]
trigger1 = parent,life > (parent,LifeMax/3)
anim = 3055
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 500
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13
;channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 150
v = 13
value = 150

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 150
trigger1 = root,stateno = [3040,3050]
v = 13
value = 2

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 90
trigger1 = root,stateno = [3060,3070]
v = 13
value = 6

[State 0, BindToRoot]
type = BindToroot
trigger1 = facing = root,facing
trigger1 = root,stateno = 3040
pos = 10,-25

[State 0, BindToRoot]
type = BindToroot
trigger1 = facing = root,facing
trigger1 = root,stateno = 3041
pos = 40,-25

[State 0, BindToRoot]
type = BindToroot
trigger1 = facing = root,facing
trigger1 = root,stateno = 3060
pos = -15,-25

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

; pocicion en siguiente state
[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = 23

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 3042
trigger2 = root,stateno = 3061
value = 3051

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [3040,3099]
value = 3053


; odama rasengan choca con oponente
[StateDef 3051]
type = A
movetype = A
physics = N
ctrl = 0
anim = 40520
sprpriority = 1000
hitcountpersist = 1000

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 3066
trigger1 = parent,life <= (parent,LifeMax/3)
value = 3066

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 3051
time = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 3050
value = 13,2

[State 200,HitDef]
type=HitDef
trigger1= timemod = 6,2
attr= S,HA
animtype=Light
damage= 5
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-1
guard.dist = 0
kill = 0
sprpriority = 1000

[State 200,HitDef]
type=HitDef
trigger1= root,command = "x"
trigger2= root,command = "y"
trigger3= root,command = "z"
trigger4= root,command = "a"
trigger5= root,command = "b"
trigger6= root,command = "c"
trigger7= root,var(59) = 1
trigger7= timemod = 7,0
trigger8= root,var(59) = 1
trigger8= time = 0
attr= S,HA
animtype=Light
damage= 5
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -0.5
air.velocity= -0.5,-.3
guard.dist = 0
kill = 0
sprpriority = 1000

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 400
v = 13
value = 400

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 400
v = 13
value = 10

[State 0, VarSet]
type = Varadd
trigger1 = timemod = 5,0
trigger1 = var(14) <= 35
v = 14
value = 2

[State 0, BindToRoot]
type = BindToroot
trigger1 = 1
trigger1 = facing = root,facing
pos = var(14)+10,-25

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 130
trigger1 = root,stateno = [3060,3070]
value = 3052

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 130
trigger1 = root,stateno = [3040,3050]
value = 3054

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [3010,3099]
value = 3053


; se expande
[StateDef 3052]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 40530

[State 0, BindToRoot]
type = BindToroot
trigger1 = 1
trigger1 = facing = root,facing
pos = var(14)+10,-25

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 3066
trigger1 = parent,life <= (parent,LifeMax/3)
value = 3066

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 14,5

[State 200,HitDef]
type=HitDef
trigger1= time = 0
trigger2= time = 1
attr= S,HA
animtype=Light
damage= 50
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,50
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -6,-3
air.velocity= -6,-3
guard.dist = 0
kill = 1
fall = 1
sprpriority = 1000

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 8000
v = 13
value = 125

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 3040, a8]
type = Velset
trigger1 = 1
y = 0
x= 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 100
value = 3053



; bola rasengan Desaparece
[StateDef 3053]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 40530

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 3066
trigger1 = parent,life <= (parent,LifeMax/3)
value = 3066

[State 0, VarSet]
type = Varadd
trigger1 = 1
v = 13
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 100
mul = 256,256,256
sinadd = -256,-256,-256,400

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 100

; Saca bolando al p2
[StateDef 3054]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 40530

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 3066
trigger1 = parent,life <= (parent,LifeMax/3)
value = 3066

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,7

[State 200,HitDef]
type=HitDef
trigger1= !Time
attr= S,NT
animtype=Light
damage= 10
guardflag=
hitflag= MADF+
priority=20,Hit
pausetime= 0,0
sparkno= -1
guard.dist = 0
p2facing = 1
p1facing = 1
p2stateno = 3055
kill = 0
sprpriority = 1000


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 1
value = 3053





; state def p2
[Statedef 3055]
type    = A
movetype= H
physics = N
sprpriority = -10

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2bodydist x <= 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = p2stateno != [3060,3070]
trigger2 = time >= 300
value = 1
movecamera = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -15
y = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = vel y < 0
y = .05

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y >= -5
y = -.4

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = -.05

[State 3040, a1]
type = ChangeAnim
trigger1 = !Time
value = 5030

[State 3040, aa]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 0
trigger2 = FrontEdgeBodyDist <= 0
value = 3056
ctrl = 0

[Statedef 3056]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -7
ctrl=0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3041, a2]
type = ChangeAnim
trigger1 = 1
value = 5051

[State 3041, en]
type = EnvShake
trigger1 = !Time
time = 100
ampl = -3

[State 3041, a5]
type = SelfState
trigger1 = time >= 100
value = 5050

[State 3041, a5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;------------------------------------------------------------------------------

; aparece
[Statedef 3044]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 3045

; sostiene al p2
[Statedef 3045]
type=A
movetype=A
physics=n
ctrl=0
sprpriority= -2

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 600,ChangeAnim]
type=ChangeAnim
trigger1=!Time
value= 3064

[State 600,1]
type=PlaySnd
trigger1=Time=1
value=0,0

[State 200,HitDef]
type=HitDef
trigger1=AnimElem=1
attr=S,NA
damage= 1
guardflag=
hitflag= MAF
priority=1,Hit
pausetime=0,130
sparkno=-1
sparkxy=5000,5000
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity=0
air.velocity=0
guard.dist = 0
sprpriority= 2

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 160
trigger2 = root,stateno = 3042
trigger3 = root,stateno != [3040,3050]
trigger4 = p2movetype != H
trigger4 = time >= 30
value = 1033


;-------------------------------------------------------------------------------
; Segunda parte,persecucion con rasengan

;---------------------------------------------------------------------------
[Statedef 3060]
type    = A
physics = N
ctrl = 0
anim = 3065
sprpriority = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 3050
pos = -10,-10
postype = P1
stateno = 3050
helpertype = normal
name = "rasengan odama"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x <= 0

[State 8305, 4]
type = VelSet
trigger1 = 1
x = (p2Dist X )*0.09
y = (p2Dist Y -5)*0.09

[State 0, PlaySnd]
type = PlaySnd
trigger1 = p2dist x <= 41
value = 15,2
persistent = 0

[State 105, 3]
type = ChangeState
trigger1 = p2dist x <= 40
value = 3061


; golpea con rasengan en el aire
[StateDef 3061]
type = S
movetype = I
physics = N
ctrl = 0
anim = 90
hitcountpersist = 1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VarAdd]
type = Varset
trigger1 = time = 0
v = 15
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 60
trigger1 = p2movetype != H
value = 50
ctrl = 1

[State 0, end]
type = ChangeState
trigger1 = time >= 200
trigger2 = numhelper(3050)=0
value = 50
ctrl = 1

;--------------------------------------------------------------












































































































































































































































[Statedef 3090]; Dash inicial que lo paraliza para recibir los shiurikens
type    = A
movetype= a
physics = n
ctrl = 0
anim = 640

[State 0, 2]
type = Velset
trigger1 = Time = 0
y = 0
x = 10

[State 0, 2]
type = Velset
trigger1 = AnimElem = 5
y = 0
x = .5

[State 370, 1]
type = HitDef
Trigger1 = time=0
attr = s, ha
getpower  = 10
givepower = 20
guardflag =
hitflag = MAF
animtype = back
guard.sparkno = 40
sparkno=s9998
sparkxy=-10,-20
damage=40,5
guard.kill = 0
kill = 0
hitsound   = s5,4
guardsound = 6,0
p1stateno = 3091
p2stateno = 3099
guard.dist = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4,0

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3091] ; retrocede
type    = a
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 43
velset=-3,-6

[State 100, 0]
type = veladd
trigger1 = time >=0
y= 0.4

[State 105, 3]
type = ChangeState
trigger1 = pos y >=0
trigger1 = vel y >=0
value = 3092

;-------------------------------------------------------------------------------

;clones de sombra 1 aire
[StateDef 3092]
type = S
movetype = A
physics = N
anim = 3030
ctrl = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, VelSet]
type = posSet
trigger1 = 1
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,17

[State 0, Helper]
type = Helper
trigger1= time = 0
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 5,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 2
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 25,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 6
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 45,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 10
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 65,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 14
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 85,-75
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 18
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 105,-100
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 22
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 125,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 26
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 145,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 32
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 165,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 28
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 185,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 24
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 205,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 20
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 225,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 16
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 245,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 12
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 265,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 8
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 285,-75
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 4
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 305,-70
postype = left ;right
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 0
helpertype = normal
name = "clon de sombra"
ID = 3093
stateno = 3093
pos = 325,-70
postype = left ;right
facing = 1
ownpal = 1


[State 0, end]
type = ChangeState
trigger1 = Time >= 120
value = 4001




;-------------------------------------------------------------------------------


; aparece clon dispara shiuriken
[Statedef 3093]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 6
range = -110,-50

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = var(6)


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, Turn]
type = Turn
trigger1 = p2dist x <= 0
trigger1 = time = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 3094

;clon dispara shiuriken en aire
[StateDef 3094]
type = A
movetype = A
physics = N
anim = 3069
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, HitOverride]
type = HitOverride
trigger1 = time <= 0
attr =  SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1033
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = time <= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 12,13

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3070
pos = -14,-35
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = 40
supermovetime = 1000
pausemovetime = 1000
scale = .10,.10
sprpriority = -5
ownpal = 1


[State 0, Helper]
type = Helper
trigger1 = animelem = 2
pos = 21,-19
postype = p1
stateno = 3095
helpertype = normal
name = "shiuriken"
ownpal = 1
size.xscale = .10
size.yscale = .10

[State 0, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 1033


;shiuriken
[StateDef 3095]
type = A
movetype = A
physics = N
anim = 3068
ctrl = 0
sprpriority = 500

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, 2]
type = VelSet
trigger1 = Time = 0
X = ((ABS(P2Dist X))/15)

[State 0, VelSet]
type = VelSet
trigger1 = p2dist y < 0
trigger1 = time = 0
y = ((ABS(P2Dist y-20))/-15)

[State 0, VelSet]
type = VelSet
trigger1 = p2dist y > 0
trigger1 = time = 0
y = ((ABS(P2Dist y-20))/15)

[State 0, VelAdd]
type = VelAdd
trigger1 = vel x <= 2
x = .1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 210,HitDef]
type=HitDef
trigger1= AnimElem =1
attr=S,SA
animtype=Medium
damage= 1
hitflag = MADF
guardflag=MA
pausetime= 3,10
sparkno= -1
sparkxy= 0,0
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -2,-1
p2stateno = 3098
getpower = 0,0
givepower = 0,0
kill = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 12,12
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 3023
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
supermovetime= 1000
pausemovetime= 1000
scale = .5,.5
sprpriority = 500
ownpal = 1
persistent = 0

[State 370, end2]
type = changestate
trigger1 = Pos y >= 0
value = 3096

[State 370, end2]
type = DestroySelf
trigger1 = ScreenPos X != [0,359]
trigger2 = ScreenPos y != [-10,250]


;shiuriken clavado en el suelo
[StateDef 3096]
type = A
physics = N
ctrl = 0
sprpriority = 500
anim = 3070

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time= 0
value = 12,15

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, Trans]
type = Trans
trigger1 = time >= 90
trans = add

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 90
time = 60
mul = 150,150,150
sinadd = -256,-256,-256,240

[State 370, end2]
type = DestroySelf
trigger1 = time >= 120

;-------------------------------------------------------------------------------
















;-------------------------------------------------------------------------------

;========================state del player 2 paralizado
[Statedef 3098]
type = s
movetype = H
physics = n
ctrl = 0
anim= 5002

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1 = 1
flag = noautoturn

[State 71120]
type = ScreenBound
trigger1 = 1
value =0

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Super D]
type = null;NotHitBy
trigger1 = 1
value = sca, aA, ap,at
time = 1

[State 372, 1]
type = ChangeAnim2
Trigger1 = time=0
value = 5002

[State 0, 2]
type = VelSet
Trigger1 = time = 0
Trigger2 = pos y >= 0
x= 0
y= 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 370, end2]
type = SelfState
Trigger1 = p2stateno !=[3090,4999]
value = 5050

;========================state del player 2 defendiendoce
[Statedef 3099]
type = s
movetype = H
physics = n
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 130
Trigger1 = pos y >= 0
value = 130

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 132
Trigger1 = pos y < 0
value = 132

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1 = 1
flag = noautoturn

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 71120]
type = ScreenBound
trigger1 = 1
value =0

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Super D]
type = null;NotHitBy
trigger1 = 1
value = sca, aA, ap,at
time = 1

[State 0, 2]
type = VelSet
Trigger1 = time = 0
Trigger2 = pos y >= 0
x= 0
y= 0

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 370, end2]
type = SelfState
Trigger1 = p2stateno !=[3090,4999]
value = 5050








;--------------------------------------------------
;-------------------------------------------------------------------------
;Auxiliar de arena en el P2
[Statedef 3295]
type    = S
physics = N
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 3

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 2

[State 1420]
type = posadd
trigger1 = 1
x = p2dist X-1

[State 60, Explod atras]
type = Explod
trigger1 = time%2 = 0
anim = 7102
ID =  7102
pos = 0,5
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
pausemove =1
scale = 0.7, 0.7
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 3290, DestroySelf]
type = DestroySelf
trigger1 = p2stateno != 3291
; comienza ataque especial
;==================================================
[Statedef 4000]
type    = A
movetype= a
physics = N
ctrl = 0
anim = 4000 ;pose para empezar (2 frames 10 tics)
poweradd = -2000

[State 210, 1]
type = PlaySnd
trigger1 = time= 0
value = 25,8

[State 0, 2]
type = Velset
trigger1 = Time = 0
y = 0
x = 0

[State 3000, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = sca, aA, ap,at
time = 5

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 100
mul = 256,256,256
sinadd = -100,-100,-100,200

[State 0, Pause]
type = Pause
trigger1 = time = 1
time = 80
movetime = 0

[State 105, 3]
type = ChangeState
trigger1 = Animtime = 0
value = 3090

[Statedef 4001]; dash hacia el oponente
type    = A
movetype= a
physics = n
ctrl = 0
anim = 640

[State 0, 2]
type = Velset
trigger1 = Time = 0
y = 0
x=10

[State 370, 1]
type = HitDef
Trigger1 = time=0
attr = s, ha
getpower  = 10
givepower = 20
guardflag =
hitflag = MAF
animtype = back
guard.sparkno = 40
sparkno=s9998
sparkxy=-10,-20
damage=40,5
guard.kill = 0
kill = 0
hitsound   = s5,4
guardsound = 6,0
p1stateno = 4100
p2stateno = 4500
guard.dist = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4,0

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;================
[Statedef 4100] ; comienza ataque , retrocede
type    = a
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 43
velset=-3,-6

[State 100, 0]
type = veladd
trigger1 = time >=0
y= 0.4

[State 105, 3]
type = ChangeState
trigger1 = pos y >=0
trigger1 = vel y >=0
value = 4101

[Statedef 4101] ; pose agachado (1 frame, 14 tics)
type    = s
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 47
velset=-2,0

[State 100, 0]
type = posSet
trigger1 = time =0
y= 0

[State 210, 1]
type = PlaySnd
trigger1 = time = 0
value = 52,0

[State 105, 3] ; ataque acertado
type = ChangeState
trigger1 = animtime =0
trigger1 = p2stateno =[4500,4599]
value = 4102

[State 105, 3]  ; ataque no acertado
type = ChangeState
trigger1 = animtime =0
trigger1 = p2stateno !=[4500,4599]
value = 0
ctrl=1

[Statedef 4102]; hacer aparecer clones de sombra
type    = s
movetype= a
physics = s
juggle  = 8
ctrl = 0
anim = 3030  ; pose clones de sombra

[State 210, 1]
type = PlaySnd
trigger1 = time= 0
value = 25,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,17

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 27
range = -100,-20

[State -2, ÀÉ®æ] ;
type = helper
trigger1 = time <= 180
trigger1 = timemod=10,0
helpertype =normal
name ="7000"
id=7000
stateno = 7000
pos = 30,var(27)
postype = p1
ontop=0
ownpal = 1

[State 105, 3]
type = ChangeState
trigger1 = time = 220
value = 4103


[Statedef 4103] ; se prepara para perseguir
type    = s
movetype= a
physics = s
juggle  = 8
ctrl = 0
anim = 47 ; se prepara para perceguir (3 frames 10 tics)

[State 210, 1]
type = PlaySnd
trigger1 = time= 0
value = 25,1

[State 105, 3]
type = ChangeState
trigger1 = time = 19
value = 4104

[Statedef 4104]; persigue
type    = s
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 100;4001
velset=10,0

[State îî]
type = varset
trigger1 = Time =0
v = 18
value=0

[State 600, 4]
type = varadd
trigger1= time = [0,51]
v = 18
value=5

[State -2, 1]
type = allPalFX
trigger1= time = [0,51]
time = 1
add = 0-var(18),0-var(18),0-var(18)

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1= time >= 51
flag = nobg
flag2= nofg
flag3= globalnoshadow

[State 0, ScreenBound]
type = ScreenBound
trigger1 = frontedgedist <= 1
value = 0
movecamera = 0,0

[State 105, 3]
type = ChangeState
trigger1 = var(18) >=255
value = 4105

[Statedef 4105] ;state del ataque especial
type    = s
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 3012  ; animacion invisible
velset=0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 50
value = 16,1

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1= 1
flag = nobg
flag2= nofg
flag3= globalnoshadow

[State ­I´º]
type = Explod
trigger1 = time=0
anim = 3067
removetime =630
pos= -20,0
postype =back
ownpal=1
ontop=0
sprpriority = -100
scale=1,.5
bindtime=-1

[State «G]
type = varset
trigger1 = Time =0
v = 19
value=0

[State 600, 4]
type = varadd
trigger1= time = [0,51]
v = 19
value=5

[State -2, 1]
type = allPalFX
trigger1= time = [0,51]
time = 1
add = -255+var(19),-255+var(19),-255+var(19)

[State 105, 3]
type = TargetState
trigger1 = time=60
value=4501

[State 105, 3]
type = TargetFacing
trigger1 = time=60
value=-1

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 27
range = -150,150

[State -2, ÀÉ®æ]
type = helper
trigger1 = p2stateno=4501
trigger1 = timemod=10,0
trigger1 = time=[130,360]
helpertype =normal
name ="7001"
id=7001
stateno = 7001
pos = -50,-var (27)
postype = back
ontop=0
ownpal = 1

[State 0, 2]
type = posSet
Trigger1 = time=400
x=IfElse(facing=1,-200,200)
y=0

[State 0, 2]
type = velSet
Trigger1 = time=400
Trigger2 = time=520
x=0
y=0

[State 0, 2]
type = velSet
Trigger1 = time=450
x=10
y=0

[State 0, 2]
type = veladd
Trigger1 = time=[450,520]
x=-0.2
y=0

[State 105, 3]
type = Changeanim
trigger1 = time=450
value = 20    ; dash

[State 202, Áô§Î]
type = AssertSpecial
trigger1 = time=[450,520]
flag = invisible

[State 1400, 2]
type = Explod
trigger1 = time=450
anim = 4001 ; naruto persiguiendo
removetime =71
pos= 0,0
postype =p1
ownpal=1
ontop=1
id=450
scale = 1,1
bindtime=-1

[State -2, ¤jÅÜ¤p]
type = ModifyExplod
trigger1 = time=[450,500]
ID = 450
scale = 3-(0.04*(time-450)),3-(0.04*(time-450))

[State 210, 1]
type = PlaySnd
trigger1 = time=450
value = 4,0

[State 210, 1]
type = PlaySnd
trigger1 = time=625 -15
value = 3,2

[State 0, 2]
type = velSet
Trigger1 = time=520 -15
x=-0.2
y=0

[State 105, 3]
type = Changeanim
trigger1 = time=520 -15
value = 4004  ;da el golpe (f1 5 tics, f2 100 tics f3 3 f4 3 f5 -1)

[State 1400, 2]
type = Explod
trigger1 = time=630 -15
anim = F11
removetime =20
pos= 0,-20
postype =p2
ownpal=1
ontop=1
facing=-1


[State 210, 1]
type = PlaySnd
trigger1 = time= 450 ; borraré tu sonrrisa
value = 25,0


[State 210, 1]
type = PlaySnd
trigger1 = time=630  -15
value = F5,4

[State -2, 1]
type = EnvColor
trigger1= time >= 630 -15
time = 1
value= 255,255,255
under = 1

[State -2, 1]
type = PalFX
trigger1= time >= 630 -15
time = 1
add = -255,-255,-255

[State 0, HitAdd]
type = HitAdd
trigger1 = time=630  -15
value = 1
persistent =0

[State 210, 1]
type = PlaySnd
trigger1 = time=630  -15
value = 5,0

[State 0, 2]
type = velSet
Trigger1 = time=630 -15
x=0.2
y=0

[State 0, 2]
type = TargetVelSet
Trigger1 = time=630 -15
x=0.2
y=0

[State 105, 3]
type = ChangeState
trigger1 = time=800
value = 4106

[Statedef 4106] ; termina ataque de puños
type    = a
movetype= a
physics = N
ctrl = 0
anim = 43

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -1
y = -5

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 105, 3]
type = ChangeState
trigger1 = p2life <= 0
value = 50
ctrl=1

[State 105, 3]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = time >= 3
value = 4110


;rafaga de 4000 patadas!
[StateDef 4110]
type = S
movetype = A
physics = S
anim = 3030
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,17

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = 16,5
channel = 5

[State 0, Helper]
type = Helper
trigger1 = timemod = 6,5
trigger1 = time <= 240
;trigger1 = time >= 5
helpertype = normal
name = "clon de sombra"
ID = 7002
stateno = 7002
pos = 0,-150
postype = p2
facing = 1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1= time = 280
helpertype = normal
name = "clon de sombra"
ID = 3002
stateno = 3002
pos = 30,0
postype = p2
facing = -1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1= time = 280
helpertype = normal
name = "clon de sombra"
ID = 3002
stateno = 3002
pos = -30,0
postype = p2
facing = 1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, end]
type = ChangeState
trigger1 = Time >= 320
value = 3005








;----------------------------------------------------------------------
;SuperCharges:
;----------------------------------------------------------------------

;SuperCharge-LVL2
[Statedef 6801]
physics = N
velset = 0,0
anim = 6803
sprpriority = 5



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nobg
flag3 = noFG

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 26
value = 512

[State 0, VarAdd]
type = VarAdd
triggerall = var(26)>=0
trigger1 = time >= 0
v = 26
value = -11

[State 6800, BgPalfx]
type = Null;BgPalfx
trigger1 = Time >=0
time = 1
add = 256,256,256
mul = var(26),var(26),var(26);512-ceil(21*time),512-ceil(21*time),512-ceil(21*time)
invertall = 1

[State 0, BindToParent]
type = null;BindToParent
trigger1 = 1
pos = parent,var(11),parent,var(12)

[State 0, Explod]
type = Explod
trigger1 = time = 24
anim = 6805
ID = 7005
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 16
supermovetime = -1
scale = 0.05,0.05
sprpriority = 4
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 8520, Scale]
type = ModifyExplod
trigger1 = numexplod(7005)
ID = 7005
scale = 2 -(0.125 * (time -24)), 2 -(0.125 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 0, Explod]
type = Explod
trigger1 = time = 0 || time = 8 || time = 16 || time = 24
anim = 6804
ID = ifelse(time = 24, 7004, ifelse(time = 16, 7003, ifelse(time = 8, 7002, 7001)))
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 16
supermovetime = -1
scale = 1,1
sprpriority = 4
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(7001)
ID = 7001
scale = 1-(0.0625*time), 1-(0.0625*time)
trans = addalpha
alpha = ifelse(time < 4,64*time,256),256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(7002)
ID = 7002
scale = 1-(0.0625*(time -8)),1-(0.0625*(time-8))
trans = addalpha
alpha = ifelse((time -8) < 4,64*(time -8),256),256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(7003)
ID = 7003
scale = 1-(0.0625*(time-16)),1-(0.0625*(time-16))
trans = addalpha
alpha = ifelse((time -16) < 4, 64*(time -16),256),256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(7004)
ID = 7004
scale = 1-(0.0625*(time-24)),1-(0.0625*(time-24))
trans = addalpha
alpha = ifelse((time-24) < 4,64*(time -24), 256),256

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = time <= 10
trans = addalpha
alpha = 256,256

[State 0, Trans]
type = Trans
trigger1 = time > 10
trans = addalpha
alpha = ceil(256-(8.53*(time-10))),256

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 500, Angle]
type = Angleadd
trigger1 = 1
value = 15

[State 500, Draw]
type = AngleDraw
trigger1 = 1
scale = .04*time,.04*time

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0





























;========================7000 ; clones de sombra 1(primeros)

; aparece
[Statedef 7000]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 7010

[Statedef 7010]
type    = a
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 4001  ; dash con daño
sprpriority = 45+(random%10)

[State 3000, Super D]
type = notHitBy
trigger1 = 1
value = sca,aa,at,ap
time = 1

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, 2]
type = velSet
trigger1 = time = 0
X = 10
Y =((-.3)**(random%2))*((random%5)+(0.01*(random%11)))

[State 0, VarAdd]
type = VelAdd
trigger1 = pos y >= -10
value = -.2


[State 500, Angle]
type = AngleSet
trigger1 = vel x >= 0
value = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi))); + 2

[State 500, Angle]
type = AngleSet
trigger1 = vel x < 0
value = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+ 180

[State 500, Draw]
type = AngleDraw
trigger1 = 1

[State 1073,2]
type = DestroySelf
trigger1 = time>=50














;========================7001  segundos clones
[Statedef 7001]
type    = a
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 4001
sprpriority = 45+(random%10)

[State 500, Angle]
type = AngleSet
trigger1 = anim != 4002
value = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi))); + 2

[State 500, Draw]
type = AngleDraw
trigger1 = 1

[State 3000, Super D]
type = notHitBy
trigger1 = 1
value = sca,aa,at,ap
time = 1

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 8305, 4]
type = VelSet
trigger1 = anim != 4002
x = (p2Dist X )*0.09
y = (p2Dist Y +20)*0.09

[State 8305, 4]
type = Velmul
trigger1 = anim = 4002
x = .3
y = .3
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = P2Dist x <= 50
value = 4002
persistent = 0

[State 210, 1]
type = PlaySnd
trigger1 = anim = 4002
trigger1 = animelem = 3
value = 5,0
persistent =0

[State 0, HitAdd]
type = HitAdd
trigger1 = anim = 4002
trigger1 = animelem = 3
value = 1
persistent =0

[State 1400, 2]
type = Explod
trigger1 = anim = 4002
trigger1 = animelem = 3
anim = 9998
removetime = -2
pos= ((-1)**(random%2))*((random%20)+(0.1*(random%11))) +10  ,((-1)**(random%2))*((random%20)+(0.1*(random%11)))
postype =p2
ownpal=1
ontop=1
scale = .5,.5
persistent =0

[State 0, VelAdd]
type = VelAdd
trigger1 = anim = 4002
x = -.1

[State 0, VelMul]
type = VelMul
trigger1 = anim = 4002
trigger1 = animelem = 3
y = -1
persistent =0

[State 0, VelAdd]
type = Velset
trigger1 = anim = 4002
x = 5
persistent =0

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 4002
trigger1 = vel x <= 2
trigger1 = time >= 90
value = 7033



;========================7002  ultimos clones



; aparece
[Statedef 7002]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=2
anim = 3012

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 5
range = -160,160

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
x = var(5)
y = -150


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 6
value = 7003




[Statedef 7003]
type    = a
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 3009
sprpriority = -5+(random%10)

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x <= 0

[State 500, Draw]
type = AngleDraw
trigger1 = 1

[State 500, Angle]
type = AngleSet
trigger1 = 1
value = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi))); + 2

[State 3000, Super D]
type = notHitBy
trigger1 = 1
value = sca,aa,at,ap
time = 1

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 200,HitDef]
type=HitDef
trigger1=AnimElem=1
attr=S,NA
animtype=Light
damage= 3
guardflag=
hitflag=MADF
priority=1,Hit
pausetime= 2,40
sparkno=s9998
sparkxy=-5,0
hitsound=s5,0
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= 0,-5
air.velocity= 0,-5
guard.dist = 0
fall = 1
sprpriority = -10+(random%10)
kill = 0

[State 8305, 4]
type = VelSet
trigger1 = time >= 1
x = (p2Dist X )*0.08
y = (p2Dist Y +25)*0.08

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = pos y >= 0
flag = noshadow

[State 0, ChangeState]
type =  changestate
trigger1 = movecontact
value = 70333

;vaja rapido
[Statedef 70333]
type=A
movetype=A
physics=N
ctrl=0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = pos y >= 0
flag = noshadow

[State 500, Draw]
type = AngleDraw
trigger1 = 1


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = .3
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 30
value = 7033
ctrl = 0


;[State 0, ChangeState]
;type = destroyself
;trigger1 = time >= 30


;desaparece
[Statedef 7033]
type=A
movetype=A
physics=N
ctrl=0
sprpriority=-10

[State 500, Draw]
type = AngleDraw
trigger1 = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time = 6































;========================state del player 2
[Statedef 4500]
type = s
movetype = H
physics = n
ctrl = 0
anim=5002

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0


[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1 = 1
flag = noautoturn

[State 71120]
type = ScreenBound
trigger1 = 1
value =0

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Super D]
type = NotHitBy
trigger1 = 1
value = sca, aA, ap,at
time = 1

[State 372, 1]
type = ChangeAnim2
Trigger1 = time=0
value = 5002

[State 0, 2]
type = VelSet
Trigger1 = time=0
x=-10
y=-7

[State 0, 2]
type = VelSet
Trigger1 = time=100
x=0
y=0

[State 370, end2]
type = SelfState
Trigger1 = p2stateno !=[4100,4999]
value = 5050

[Statedef 4501] ; segunda parte, cuando es golpeado
type = a
movetype = H
physics = n
ctrl = 0
anim=5002
velset=0,0
sprpriority = 50

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1 = 1
flag = noautoturn

[State 71120]
type = ScreenBound
Trigger1 = 1
value =0

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Super D]
type = NotHitBy
trigger1 = 1
value = sca, aA, ap,at
time = 1

[State 0, 2]
type = posSet
Trigger1 = time=0
x=IfElse(facing=-1,-250,250)
y=-100

[State 372, 1]
type = ChangeAnim2
Trigger1 = time=0
value = 4501

[State 0, 2]
type = VelSet
Trigger1 = time=0
x=-9
y=0.2

[State 0, 2]
type = Veladd
Trigger1 = time=[0,146]
Trigger1 = vel x <=.5
x=0.1

[State 0, 2]
type = VelSet
Trigger1 = time=333
x=-10
y=-1

[State 0, 2]
type = posSet
Trigger1 = time=500
x=IfElse(facing=1,-200,200)
y=0

[State 0, 2]
type = velSet
Trigger1 = time=500
x0
y=0

[State 0, 2]
type = velSet
Trigger1 = time=510
x=5
y=0

[State 372, 1]
type = ChangeAnim
Trigger1 = time=500
value = 5002

[State -2, 1]
type = PalFX
trigger1= time = [555,740]
time = 1
add = -255,-255,-255

[State 372, 1]
type = AngleDraw
Trigger1 = 1

[State 372, 1]
type = Angleadd
trigger1= time >= 600
value = 0.2

[State 0, 2]
type = velSet
Trigger1 = time=600
x=0.2
y=-0.05

[State 210, 1]
type = PlaySnd
trigger1 = time=740
value = F5,4

[State 1400, 2]
type = Explod
trigger1 = time=740
anim = F12
removetime =18
pos= 0,-20
postype =p1
ownpal=1
ontop=1
facing=-1

[State 0, 2]
type = lifeadd
Trigger1 = time=740
value= -100
kill = 1

[State -2,´Ý¼v®ø¥¢]
type = AfterImageTime
trigger1 = time=570
value = 1

[State 370, end2]
type = SelfState
Trigger1 = p2stateno !=[4100,4105]
value = 5050

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------

; JUTSU DE INVOCASION!!!!!!!!

[StateDef 6000]
type = S
movetype = A
physics = S
anim = 3054
ctrl = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 150
mul = 256,256,256
sinadd = -100,-100,-100,300
color = 256


[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 190
movetime = 190

[State 0, PlaySnd]  ; ino
type = PlaySnd
trigger1 = animelem = 2
value = 16,2

[State 0, PlaySnd] ; i
type = PlaySnd
trigger1 = animelem = 4
value = 16,3

[State 0, PlaySnd] ; tori
type = PlaySnd
trigger1 = animelem = 6
value = 16,7

[State 0, PlaySnd] ; saru
type = PlaySnd
trigger1 = animelem = 8
value = 16,0

[State 0, PlaySnd] ; hitsuji
type = PlaySnd
trigger1 = animelem = 10
value = 16,4

[State 0, PlaySnd] ; sonido de sello
type = PlaySnd
trigger1 = time = 80
value = 12,17

[State 0, PlaySnd]; arte ninja , jutsu de invocasion
type = PlaySnd
trigger1 = time = 120
value = 16,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 190
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 190
anim = 3008
pos = 0,0
postype = p1
removetime = -2
sprpriority = 1000
ownpal = 1
supermovetime= 1000
pausemovetime= 1000

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 190
value = -1000

[State 0, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 6001



[StateDef 6002]
type = A
movetype = A
physics = A
anim = 3006
ctrl = 0
sprpriority = 20

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 5.2
y = 0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]; y
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]; y
type = Varadd
trigger1 = var(13) < 15
v = 13
value = 1

[State 0, VarSet]; x
type = VarSet
trigger1 = time = 0
v = 14
value = 0

[State 0, VarSet]; x
type = Varadd
trigger1 = var(14) < 100
v = 14
value = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale =  var(14)*0.01,var(13)*0.01

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 150


[StateDef 6003]
type = A
movetype = A
physics = A
anim = 3007
ctrl = 0
sprpriority = -20

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 8.5
y = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 5
range = -10,10

[State 200,HitDef]
type=HitDef
trigger1= timemod = 5,0
attr=S,HA
animtype=Light
damage= 12
guardflag=
hitflag= MADF
priority=1,Hit
pausetime=0,12
sparkno= -1
sparkxy= 5000,5000
hitsound= s17,2
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity=-2
air.velocity=-2,-3
guard.dist = 0
fall = 1
getpower = 0,0
givepower = 0,0

[State 0, Explod]
type = Explod
trigger1 = hitcount = 1
trigger2 = hitcount = 2
trigger3 = hitcount = 3
trigger4 = hitcount = 4
trigger5 = hitcount = 5
trigger6 = hitcount = 6
trigger7 = hitcount = 7
anim = 9998
pos = var(5),var(5)-20
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 500
ontop = 1
ownpal = 1
persistent = 0

[State 370, end2]
type = DestroySelf
trigger1 = ScreenPos X != [0,359]
trigger2 = ScreenPos y != [-10,250]

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------

;========================state del player 2 paralizado
[Statedef 6030]
type = s
movetype = H
physics = n
ctrl = 0
anim= 5002

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1 = 1
flag = noautoturn

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Super D]
type = null;NotHitBy
trigger1 = 1
value = sca, aA, ap,at
time = 1

[State 372, 1]
type = ChangeAnim2
Trigger1 = time=0
value = 5002

[State 372, 1]
type = ChangeAnim
Trigger1 = time= 35
value = 5300


[State 0, 2]
type = VelSet
Trigger1 = time = 0
Trigger2 = pos y >= 0
y= 0

[State 0, 2]
type = VelSet
Trigger1 = time = 1
x= -6

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.9

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 370, end2]
type = SelfState
Trigger1 = p2stateno !=[6030,6099]
value = 5050

;========================state del player 2 defendiendoce
[Statedef 6031]
type = s
movetype = H
physics = n
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 130
Trigger1 = pos y >= 0
value = 130

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 132
Trigger1 = pos y < 0
value = 132

[state 191, AssertSpecial Flag]
type     = assertspecial
trigger1 = 1
flag = noautoturn

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State -2, ª¦Àð¬ï¶V]
type = PlayerPush
trigger1 = 1
value = 0

[State 3000, Super D]
type = null;NotHitBy
trigger1 = 1
value = sca, aA, ap,at
time = 1

[State 0, 2]
type = VelSet
Trigger1 = time = 0
Trigger2 = pos y >= 0
x= 0
y= 0

[State 0, Gravity]
type = Gravity
trigger1 = pos y < 0

[State 370, end2]
type = SelfState
Trigger1 = p2stateno !=[6030,6099]
value = 5050

;-------------------------------------------------------------------------------



; ESPECIAL!!!! ODAMA RASENGAN DOBLE SORPRESA

[Statedef 6040]; Dash inicial que lo paraliza
type    = A
movetype= a
physics = n
ctrl = 0
anim = 640

[State 0, 2]
type = Velset
trigger1 = Time = 0
y = 0
x = 10

[State 0, 2]
type = Velset
trigger1 = AnimElem = 5
y = 0
x = .5

[State 370, 1]
type = HitDef
Trigger1 = time=0
attr = s, ha
getpower  = 10
givepower = 20
guardflag =
hitflag = MAF
animtype = back
guard.sparkno = 40
sparkno=s9998
sparkxy=-10,-20
damage=40,5
guard.kill = 0
kill = 0
hitsound   = s5,4
guardsound = 6,0
p1stateno = 6041
p2stateno = 6030
guard.dist = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4,0

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 6041] ; retrocede
type    = a
movetype= a
physics = n
juggle  = 8
ctrl = 0
anim = 43
velset=-5,-6

[State 100, 0]
type = veladd
trigger1 = time >=0
y= 0.4

[State 105, 3]
type = ChangeState
trigger1 = pos y >=0
trigger1 = vel y >=0
value = 6042

;-------------------------------------------------------------------------------
; comienza a generar los rasengan

[StateDef 6042]
type = S
movetype = A
physics = S
anim = 3074
ctrl = 0
poweradd = -2500

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 50
anim = -1
pos = 0,0
movetime = 50
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Super-Charge"
ID = 6801
stateno = 6801
pos = 5,-35
size.yscale = 1
size.xscale = 1
postype = p1   ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 7
trigger1 = time <= 120
trigger1 = timemod = 5,0
value = 13,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger2 = time = 120
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
trigger2 = time = 120
anim = 196
pos = -38,4
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 0,0
postype = P1
stateno = 20099
helpertype = normal
name = "clon izquierdo"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 10
ID = 2099
pos = 5,0
postype = P1
stateno = 20098
helpertype = normal
name = "clon izquierdo"
ownpal = 1
facing = -1
supermovetime = 1000
pausemovetime = 1000

[State 0, Explod]
type = Explod
trigger1 = time = 0
trigger2 = time = 120
anim = 196
pos = 40,4
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1



[State 0, BGPalFX]
type = BGPalFX
trigger1 = time = 0
time = 200
mul = 256,256,256
sinadd = -100,-100,-100,400

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,7

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 6050
pos = -10,-16
postype = P1
stateno = 6050
helpertype = normal
name = "rasengan super"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
ID = 6060
pos = 10,-16
postype = P1
stateno = 6060
helpertype = normal
name = "rasengan copia simple"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

;[State 240,1]
;type=PlaySnd
;trigger1= time = 60
;trigger2= time = 65
;value=25,9

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 6043

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 50
value = S0,103
channel = 3
;volume = 1000

; corre hacia el enemigo 1
[StateDef 6043]
type = S
movetype = A
physics = N
ctrl = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1850
pos = -10,-18
postype = p1
bindtime = -1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 1200
ownpal = 1
removeongethit = 0


[State 370, 1]
type = HitDef
Trigger1 = time=0
attr = s, ha
getpower  = 10
givepower = 20
guardflag =
hitflag = MAF
animtype = back
guard.sparkno = 40
sparkno= -1
sparkxy=-10,-20
damage=40,5
guard.kill = 0
kill = 0
guardsound = 6,0
p2stateno = 6031  ; se defiende
guard.dist = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 3075
value = 3075

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 5
y = 0

[State 0, end]
type = ChangeState
trigger1 = movecontact
trigger2 = p2dist x <= 0
value = 6046

; se teletransporta
[StateDef 6044]
type = S
movetype = I
physics = N
ctrl = 0

[State 0, Pause]
type = Pause
trigger1 = time = 7
time = 60
movetime = 10


[State 0, Explod] ; interrogacion
type = Explod
trigger1 = enemy,facing = 1
trigger1 = time = 8
anim = 3081
pos = 0,-40
postype = p2
facing = 1
bindtime = 1
vel = 0,-1
accel = 0,.03
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 200
ontop = 1
ownpal = 1

[State 0, Explod] ; interrogacion
type = Explod
trigger1 = enemy,facing = -1
trigger1 = time = 8
anim = 3081
pos = 0,-40
postype = p2
facing = -1
bindtime = 1
vel = 0,-1
accel = 0,.03
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 200
ontop = 1
ownpal = 1


[State 0, Helper]
type = Helper
trigger1 = time = 0
pos = 0,0
postype = P1
stateno = 6061
helpertype = player
name = "invisible camara"
ownpal = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3013
pos = 0,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ScreenBound]
type = posset
trigger1 = time = 6
trigger1 = enemy,facing = -1
x= 700
y = 0

[State 0, ScreenBound]
type = posset
trigger1 = time = 6
trigger1 = enemy,facing = 1
x= -700
y = 0

[State 0, Turn]
type = Turn
trigger1 = time >= 7
trigger1 = p2dist x < 0

[State 0, changestate]
type = changestate
trigger1 = time >= 10
value = 6045
ctrl = 1

;--------------------------------------------------------------

; corre hacia el enemigo
[StateDef 6045]
type = S
movetype = A
physics = N
ctrl = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 200,HitDef]
type=HitDef
trigger1= time = 0
attr= S,HA
animtype=Light
damage= 1
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -1
air.velocity= -.3,-.7
guard.dist = 0
kill = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 3077
value = 3077

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 7
y = 0

[State 0, end]
type = ChangeState
trigger1 = movecontact
trigger2 = p2dist x <= 0
value = 6046

; golpea con rasengan
[StateDef 6046]
type = S
movetype = I
physics = N
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = anim != 3076
value = 3076

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 100
trigger1 = p2movetype != H
value = 0
ctrl = 1

[State 0, changestate]
type = changestate
trigger1 = time >= 300
value = 0
ctrl = 1

;--------------------------------------------------------------

; camara
[StateDef 6061]
type = A
movetype = I
physics = N
anim = 3078
ctrl = 0
sprpriority = -1000

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 3
y = 0

[State 0, Explod] ; interrogacion
type = Explod
trigger1 = enemy,facing = 1
trigger1 = time = 50
anim = 3080
pos = 0,-40
postype = p2
facing = 1
bindtime = 1
vel = 0,-1
accel = 0,.03
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 200
ontop = 1
ownpal = 1

[State 0, Explod] ; interrogacion
type = Explod
trigger1 = enemy,facing = -1
trigger1 = time = 50
anim = 3080
pos = 0,-40
postype = p2
facing = -1
bindtime = 1
vel = 0,-1
accel = 0,.03
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 200
ontop = 1
ownpal = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 100




;--------------------------------------------------------------

; odama rasengan falso generandose
[StateDef 6060]
type = A
movetype = I
physics = N
anim = 3079
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
trigger1 = numhelper(6063)=0
ID = 6063
pos = 0,0
postype = P1
stateno = 6063
helpertype = normal
name = "efecto de aura de rasengan"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Explod]
type = Explod
trigger1 = timemod = 15,0
trigger1 = root,stateno != 6043
trigger1 = root,stateno != 6044
anim = 3055
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 500
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 150
v = 13
value = 150

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 150
v = 13
value = 2

[State 0, BindToRoot]
type = BindToroot
trigger1 = 1
pos = 12,-18

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = root,stateno = 6043
trigger2 = root,stateno = 6044
flag = invisible


[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 6043
value = 3053

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [6040,6099]
value = 3053


;aura 1
[StateDef 6062]
type = A
movetype = I
physics = N
anim = 3073
ctrl = 0
sprpriority = 100

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) <= 0
v = 13
value = 0

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 500
trigger1 = time <= 150
v = 13
value = 2

[State 0, VarSet]
type = Varadd
trigger1 = parent,stateno = 6051
trigger1 = var(13) >= 0
v = 13
value = -4

[State 0, BindToRoot]
type = BindToparent
trigger1 = 1
pos = 0,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = (var(13)*0.001),(var(13)*0.001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(13) <= 1
trigger1 = time >= 40


;aura 2
[StateDef 6063]
type = A
movetype = I
physics = N
anim = 3073
ctrl = 0
sprpriority = 90

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = -1
add = -100,-100,-100
mul = 256,256,256
color = 256

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(13) <= 0
v = 13
value = 0

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 500
v = 13
value = 2

[State 0, VarSet]
type = Varadd
trigger1 = time >= 100
trigger1 = var(13) >= 0
v = 13
value = -1

[State 0, BindToRoot]
type = BindToparent
trigger1 = 1
pos = 0,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = (var(13)*0.001),(var(13)*0.001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -6

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno = 6043




;--------------------------------------------------------------

; odama rasengan generandose
[StateDef 6050]
type = A
movetype = I
physics = N
anim = 3079
ctrl = 0
sprpriority = 1000
hitcountpersist = 1000

[State 0, Helper]
type = Helper
trigger1 = time = 0
trigger1 = numhelper(6062)=0
ID = 6062
pos = 0,0
postype = P1
stateno = 6062
helpertype = normal
name = "efecto de aura de rasengan"
ownpal = 1
supermovetime = 1000
pausemovetime = 1000

[State 0, Explod]
type = Explod
trigger1 = timemod = 15,0
anim = 3055
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
scale = .5,.5
sprpriority = 500
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time >= 20
trigger1 =((GameTime%20) = 0)
value = 13,13
;channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 13
value = 0

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 150
v = 13
value = 2

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 190
trigger1 = root,stateno = 6045
v = 13
value = 2

[State 0, BindToRoot]
type = BindToroot
trigger1 = root,stateno = 6042
trigger1 = 1
pos = -10,-18


[State 0, BindToRoot]
type = BindToroot
trigger1 = root,stateno = 6043
trigger1 = 1
pos = -5,-22

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleSet]
type = AngleSet
trigger1 = time = 0
value = 0

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

; pocicion en siguiente state
[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = 23

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 6046
value = 6051

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [6040,6099]
value = 6053


; odama rasengan choca con oponente
[StateDef 6051]
type = A
movetype = A
physics = N
ctrl = 0
anim = 3079
sprpriority = 1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
trigger1 = prevstateno = 3050
value = 13,2

[State 200,HitDef]
type=HitDef
trigger1= timemod = 3,0
attr= S,HA
animtype=Light
damage= 3
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,0
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= .1
air.velocity= .1,-1
guard.dist = 0
kill = 0
p2facing = 1
sprpriority = 1000

[State 0, VarSet]
type = VarSet
trigger1 = var(13) >= 400
v = 13
value = 400

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 400
v = 13
value = 10

[State 0, VarSet]
type = Varadd
trigger1 = timemod = 5,0
trigger1 = var(14) <= 35
v = 14
value = 2

[State 0, BindToRoot]
type = BindToroot
trigger1 = 1
pos = var(14)+10,-25

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 100
value = 6052

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno != [6040,6099]
value = 6053


; se expande
[StateDef 6052]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 3079

[State 0, BindToRoot]
type = BindToroot
trigger1 = 1
pos = var(14),-25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 14,5

[State 200,HitDef]
type=HitDef
trigger1= time = 0
trigger2= time = 1
attr= S,HA
animtype=Light
damage= 100
guardflag=
hitflag= MADF
priority=1,Hit
pausetime= 0,50
sparkno= -1
sparkxy= 0,0
hitsound=s14,3
guardsound=s6,0
ground.type=High
ground.slidetime=13
ground.hittime=18
ground.velocity= -6,-3
air.velocity= -6,-3
guard.dist = 0
kill = 1
fall = 1
sprpriority = 1000

[State 0, VarSet]
type = Varadd
trigger1 = var(13) < 8000
v = 13
value = 125

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 13,1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 3040, a8]
type = Velset
trigger1 = 1
y = 0
x= 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, ChangeState]
type = ChangeState
trigger1 = time >= 130
value = 6053


;------------------------------

; bola rasengan Desaparece
[StateDef 6053]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 1000
anim = 3079

[State 0, VarSet]
type = Varadd
trigger1 = 1
v = 13
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 100
mul = 256,256,256
sinadd = -256,-256,-256,400

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .001+ (var(13)*0.0001),.001+(var(13)*0.0001)

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -11

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, ChangeState]
type = destroyself
trigger1 = time >= 100
;----------------------------------------------------------------
;------------------------------------------------------------------------
[StateDef 6101]
type =C
movetype= A
physics = C
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3020
poweradd = -1000
sprpriority = 2

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 40
Range = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(40) = 0
trigger1 = animelem = 1
value = S5225,6
volume = 255
channel = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(40) = 1
trigger1 = animelem = 1
value = S900,0
volume = 255
channel = -1

[State 8999, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 85
pos = 0,-40
anim = S6075
movetime = 85
DARKEN = 0
sound = S3833,0

[State 8999, PlaySnd]
type = PlaySnd
trigger1 = animElem = 3
TRIGGER2 = ANIMELEM = 4
value = 4555, 0
volume = 255
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ANIMELEM = 1
value = S5225,17
volume = 255
channel = -1

[State 8600, Helper]
type = Helper
trigger1 = time = 24
helpertype = player
name =  "bunshin"
ID = 870004
stateno = 50000
pos = 50,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 8600, Helper]
type = Helper
trigger1 = time = 24
helpertype = player
name =  "bunshin"
ID = 870004
stateno = 50000
pos = -50,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 7600, Explod]
type = Explod
trigger1 = animelem = 2
anim = 9999
ID = 9999
pos = 50,0
postype = p1  ;p2,front,back,left,right
facing = 1
scale=.2,.5
vfacing = 1
bindtime = 1
removetime = 85
ontop = 1
supermovetime = 85

[State 7600, Explod]
type = Explod
trigger1 = animelem = 2
anim = 17000
ID = 9999
pos = -50,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
scale=.2,.5
bindtime = 1
removetime = 85
ontop = 1
supermovetime = 85

[state 7600, 0]
type = removeexplod
trigger1 = time = 25
id = 9999

[State 7600, end]
type = ChangeState
trigger1 = Time = 30
value = 0
ctrl = 1

;----------------------------------------------------------------
;---------------------------------------------------------------------------
[StateDef 6300]
type = S
physics = S
ctrl = 0
sprpriority = 0
velset = 0,0
anim = 6300
poweradd = -1000

[State 0]
type = SuperPause
trigger1 = time = 0
time = 50
anim = -1
movetime = 50
darken = 0

[State 0]
type = Explod
trigger1 = time = 0
anim = 5994
pos = 0,-30
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 0.5,0.5
ownpal = 1
supermove = 1

[State 0]
type = Explod
trigger1 = time = 35
anim = 6299
pos = 0,5
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 1,1
ownpal = 1
supermove = 1

[State 0]
type = Varset
trigger1 = time = 0
v = 2
value = 1

[State 0]
type = Varset
trigger1 = time = 0
v = 5
value = 100

[state 0]
type = playsnd
trigger1 = time = 0
value = S0,23

[state 0]
type = playsnd
trigger1 = time = 0
value = S0,62

[state 0]
type = playsnd
trigger1 = time = 30
value = S0,25

[state 0]
type = playsnd
trigger1 = time = 35
value = S0,34

[State 0]
type = Helper
trigger1 = time = 35
helpertype = normal ;player
name = "Flame1"
ID = 6304
stateno = 6304
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0]
type = Helper
trigger1 = time = 35
helpertype = normal ;player
name = "Flame2"
ID = 6304
stateno = 63304
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0]
type = Helper
trigger1 = time = 35
helpertype = normal ;player
name = "Flame3"
ID = 6304
stateno = 64304
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0]
type = Helper
trigger1 = animtime = 0
helpertype = normal ;player
name = "Kyuubi"
ID = 6302
stateno = 6302
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1


[State 0]
type = ChangeState
trigger1 = animtime = 0
value = 6301
ctrl = 0

;---------------------------------------------------------------------------
[statedef 6301]
type = S
physics = S
ctrl = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 80,0
trigger1 = time >= 0
value = 0,77
volume = 999999

[State 0]
type = Width
trigger1 = 1
edge = 0,0
player = 50,50

[State 0]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Level 1"
ID = 6306
stateno = 6306
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0]
type = Turn
trigger1 = P2Dist X < -10

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = 3

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = -3

[State 0]
type = playsnd
triggerall = command = "holdfwd" || command = "holdback"
trigger1 = timemod = 20,0
value = S0,4

[State 0, 1]
type = ChangeAnim
trigger1 = time = 0
trigger2 = Anim != 0 && Anim != 5
trigger2 = anim = 10020 && command != "holdfwd" || anim = 10021 && command != "holdback"
value = 10000

[State 20, 3]
type = ChangeAnim
triggerall = command = "holdfwd"
trigger1 = Anim != 10020 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 10020

[State 20, 4]
type = ChangeAnim
triggerall = command = "holdback"
trigger1 = Anim != 10021 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 10021

[state 0]
type = changestate
triggerall = var(10) = 0
trigger1 = command = "a"
value = 6315
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 0
trigger1 = command = "b"
value = 6320
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 0
trigger1 = command = "c"
value = 6325
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 0
triggerall = power >= 500
trigger1 = command = "x"
value = 6330
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 1
trigger1 = random >= 0 && random < 50
trigger1 = (p2dist x) >= 0
trigger1 = (p2dist x) < 100
value = 6315
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 1
trigger1 = random >= 0 && random < 50
trigger1 = (p2dist x) >= 0
trigger1 = (p2dist x) < 100
value = 6320
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 1
trigger1 = random >= 0 && random < 50
trigger1 = (p2dist x) >= 0
trigger1 = (p2dist x) < 100
value = 6325
ctrl = 0

[state 0]
type = changestate
triggerall = power >= 500
triggerall = var(10) = 1
trigger1 = random >= 0 && random < 10
trigger1 = (p2dist x) >= 150
trigger1 = (p2dist x) < 500
value = 6330
ctrl = 0

[state 0]
type = changestate
triggerall = var(10) = 0
triggerall = power >= 1000
trigger1 = command = "z"
value = 6350
ctrl = 0

[state 0]
type = changestate
triggerall = power >= 1000
triggerall = var(10) = 1
trigger1 = random >= 0 && random < 25
value = 6350
ctrl = 0

[state 0]
type = changestate
trigger1 = var(5) <= 0
trigger2 = roundstate != 2
value = 0
ctrl = 1
;----------------------------------------------------------------------------
[StateDef 6302]
type = S
physics = S
velset = 0,0
anim = 6302

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[state 0]
type = playerpush
trigger1 = 1
value = 1

[State 0]
type = Turn
trigger1 = P2BodyDist X < -10

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 6303
time = -1

[state 0]
type = bindtoroot
trigger1 = 1
pos = 0,5

[State 0]
type = Width
trigger1 = 1
edge = 0,0
player = 50,50

[State 0]
type = Explod
trigger1 = parent,var(5) <= 0
anim = 5995
pos = 0,-40
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 1,1
ownpal = 1
supermove = 1

[State 0]
type = playsnd
trigger1 = parent,var(5) <= 0
trigger2 = roundstate != 2
value = S0,50

[State 0]
type = playsnd
trigger1 = parent,var(5) <= 0
trigger2 = roundstate != 2
value = S0,53

[State 0]
type = Destroyself
trigger1 = parent,var(5) <= 0
trigger2 = roundstate != 2
;----------------------------------------------------------------------------
[StateDef 6303]
type = S
movetype = H
physics = S
anim = 6303

[state 0]
type = bindtoroot
trigger1 = 1
pos = 0,5

[State 0]
type = Turn
trigger1 = P2BodyDist X < -10

[State 0]
type = ParentVarAdd
trigger1 = time = 0
v = 5
value = -gethitvar(damage)*4/5

[State 0]
type = ChangeState
trigger1 = time = 2
value = 6302

;----------------------------------------------------------------------------
[StateDef 6304]
type = S
physics = S
anim = 6304
sprpriority = 5

[state 0]
type = bindtoroot
trigger1 = 1
pos = 90,60

[state 0]
type = angledraw
trigger1 = 1
scale = 0.7,1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[state -3]
type = playsnd
trigger1 = timemod = 75,0
value = S0,51

[State 0]
type = Destroyself
trigger1 = parent,var(5) <= 0
trigger2 = roundstate != 2

;---------------------------------------------------------------------------
[StateDef 6315]
type = S
movetype= A
physics = S
ctrl = 0
poweradd = 50

[state 0]
type = changeanim
triggerall = var(7) = 0
trigger1 = time = 0
value = 6315

[State 0]
type = Explod
trigger1 = time = 0
anim = 6316
id = 6300
pos = 0,5
postype = p1  ;p2,front,back,left,right
removetime = -2
;ontop = 1
scale = 1,1
ownpal = 1
bindtime = -1

[State 0]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 25,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = -1
guard.sparkno = -1
hitsound = S0, 59
guardsound = S0, 17
ground.type = High
ground.slidetime = 0
ground.hittime  = 20
ground.velocity = -2
airguard.velocity = -2
air.type = High
air.velocity = -2
air.hittime = 20
fall = 1

[State 0]
type = Explod
trigger1 = movehit = 1
anim = 5995
pos = 60,-10
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 1,1
ownpal = 1
supermove = 1

[State 0]
type = Explod
trigger1 = movehit = 0
trigger1 = movecontact = 1
anim = 5999
pos = 60,-10
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 1,1
ownpal = 1
supermove = 1

[state 0]
type = playsnd
trigger1 = animelem = 2
value = S0,61

[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 6301
ctrl = 0

;---------------------------------------------------------------------------
[StateDef 6320]
type = S
movetype= A
physics = S
ctrl = 0
poweradd = 50

[state 0]
type = changeanim
triggerall = var(7) = 0
trigger1 = time = 0
value = 6320

[State 0]
type = Explod
trigger1 = time = 0
anim = 6321
id = 6300
pos = 0,5
postype = p1  ;p2,front,back,left,right
removetime = -2
;ontop = 1
scale = 1,1
ownpal = 1
bindtime = -1

[State 0]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 25,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = -1
guard.sparkno = -1
hitsound = S0, 59
guardsound = S0, 17
ground.type = High
ground.slidetime = 0
ground.hittime  = 20
ground.velocity = -10
airguard.velocity = -10
air.type = High
air.velocity = -10
air.hittime = 20
fall = 1

[State 0]
type = Explod
trigger1 = movehit = 1
anim = 5995
pos = 75,-10
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 1,1
ownpal = 1
supermove = 1

[State 0]
type = Explod
trigger1 = movehit = 0
trigger1 = movecontact = 1
anim = 5999
pos = 75,-10
postype = p1  ;p2,front,back,left,right
removetime = -2
ontop = 1
scale = 1,1
ownpal = 1
supermove = 1

[state 0]
type = playsnd
trigger1 = animelem = 2
value = S0,61

[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 6301
ctrl = 0

;--------------------------------------------------------------------------
;---------------------------------------------------------------------------
[StateDef 6325]
type = S
movetype= A
physics = S
ctrl = 0
poweradd = 50

[state 0]
type = changeanim
triggerall = var(7) = 0
trigger1 = time = 0
value = 6325

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S7,75
volume = 255
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S7,75
volume = 255
channel = -1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 3
time = 30
freq = 150
ampl = -15

[State 0, Explod]
type = Explod
trigger1 = time = 3
anim = 6697
ID = 6697
pos = 60,-110
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .75,.75
sprpriority = 20
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0]
type = Explod
trigger1 = time = 0
anim = 6326
id = 6300
pos = 0,5
postype = p1  ;p2,front,back,left,right
removetime = -2
sprpriority = -2
scale = 1,1
ownpal = 1
bindtime = -1

[State 0, Projectile]
type = Projectile
trigger1 = time = 3
ProjID = 72191
projanim = 72191
projscale = 1,1
projremove = 0
projremovetime = 2
velocity = 0,0
remvelocity = 0,0
accel = 0,0
velmul = 1
projhits = 1
projmiss = 0
projmisstime = 0
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
projheightbound = -240
pos = 40,-80
postype = p1
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
attr = S,NA
hitflag = MAFD
guardflag = HL
ground.type = Low
air.type = Low
damage = 70,35
pausetime = 0,5
sparkno = -1
sparkxy = 0,0
ground.velocity = -20,-5
air.velocity = -20,-5
fall = 1
fall.recover = 0
fall.yvelocity = -8
persistent = 0
palfx.time = 1
palfx.add = 0,0,0
palfx.mul = 256,256,256



[State 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 6301
ctrl = 0

;----------------------------------------------------------------------------
[StateDef 63304]
type = S
physics = S
anim = 6304
sprpriority = 5

[state 0]
type = bindtoroot
trigger1 = 1
pos = -50,60

[state 0]
type = angledraw
trigger1 = 1
scale = 0.7,1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[state -3]
type = playsnd
trigger1 = timemod = 75,0
value = S0,51

[State 0]
type = Destroyself
trigger1 = parent,var(5) <= 0
trigger2 = roundstate != 2

;----------------------------------------------------------------------------
[StateDef 64304]
type = S
physics = S
anim = 6304
sprpriority = 5

[state 0]
type = bindtoroot
trigger1 = 1
pos = -200,60

[state 0]
type = angledraw
trigger1 = 1
scale = 0.7,1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[state -3]
type = playsnd
trigger1 = timemod = 75,0
value = S0,51

[State 0]
type = Destroyself
trigger1 = parent,var(5) <= 0
trigger2 = roundstate != 2
;----------------------------------------------------------------------------
[StateDef 6306]
type = S
physics = S
anim = 6306
sprpriority = -2

[state 0]
type = bindtoroot
trigger1 = 1
pos = 0,5

[state 0]
type = angledraw
trigger1 = 1
scale = 1,1

;[State 0, Trans]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 150,256

[State 0]
type = Turn
trigger1 = P2Dist X < -10

[State 0]
type = Destroyself
trigger1 = parent,stateno != 6301
;*---------------------------------------------------------------
; clon que mueve las manos
[Statedef 20099]
type=A
movetype=A
physics=N
ctrl=0
sprpriority= 10002
anim = 3012

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3059
trigger1 = facing != root,facing
value = 3059

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = animelem = 3
value = 13,5

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 196
pos = -40,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 6
value = 3059

[State 0, Explod]
type = Explod
trigger1 = time = 150
anim = 196
pos = -40,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 150
value = 12,16

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time = 150

;*---------------------------------------------------------------
; clon que mueve las manos
[Statedef 20098]
type=A
movetype=A
physics=N
ctrl=0
sprpriority= 10002
anim = 3012

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3049
trigger1 = facing != root,facing
value = 3049

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 12,16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = animelem = 3
value = 13,5

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 196
pos = -40,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 6
value = 3059

[State 0, Explod]
type = Explod
trigger1 = time = 150
anim = 196
pos = -40,0
postype = p1
removetime = -2
supermovetime = 1000
pausemovetime = 1000
sprpriority = 1000
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 150
value = 12,16

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, ChangeState]
type = destroyself
trigger1 = time = 150

[StateDef 11240]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 3020
velset = 0,0
poweradd = -1000
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,551
volume = 999999
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 75
value = S6,40
volume = 9999
channel = -1

[State 1000, Helper]
type = Helper
trigger1 = time = 85
helpertype = player
name = "Bunshin1"
ID = 20000
stateno = 20000
pos = 45,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 1000, Helper]
type = Helper
trigger1 = time = 85
helpertype = player
name = "Bunshin2"
ID = 20000
stateno = 20000
pos = -45,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = 6,41
volume = 999999
channel = -1

[State 6003, Explod]
type = Explod
trigger1 = time = 80
anim = 17000
ID = 567111
pos = -45,2
postype = p1
facing = 1
vfacing = 1
bindtime = 1
scale = .5,.5
removetime = -2
ontop = 1

[State 6003, Explod]
type = Explod
trigger1 = time = 80
anim = 17000
ID = 567111
pos = 45,2
postype = p1
facing = 1
vfacing = 1
bindtime = 1
scale = .5,.5
removetime = -2
ontop = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 0
pos = 0,-20
sound = S2,2
movetime = 99999999
darken = 0
p2defmul = 0
poweradd = 0
unhittable = 1
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 1000, end]
type = ChangeState
trigger1 = time = 100
value = 0
ctrl = 1











































